(self.AMP = self.AMP || []).push({n:"amp-auto-ads", f:(function(AMP) {function h(a,b){function f(){}f.prototype=b.prototype;a.prototype=new f;a.prototype.constructor=a;for(var e in b)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,e);d&&Object.defineProperty(a,e,d)}else a[e]=b[e]};Date.now();self.log=self.log||{user:null,dev:null};var k=self.log;function l(){if(k.user)return k.user;throw Error("failed to call initLogConstructor");};function p(a){a=a.__AMP_TOP||a;var b=a.services&&a.services.xhr&&a.services.xhr.obj;return b};var q;
function r(){var a=self,b="amp-auto-ads",f=q||(q=Object.create(null)),e;if(b in f)e=f[b];else{e=b;var d=b,c;if(a._experimentCookie)c=a._experimentCookie;else{c:{d:{try{c=a.document.cookie;break d}catch(w){}c=void 0}if(c){c=c.split(";");for(var g=0;g<c.length;g++){var m=c[g].trim(),n=m.indexOf("=");if(-1!=n&&"AMP_EXP"==decodeURIComponent(m.substring(0,n).trim())){c=decodeURIComponent(m.substring(n+1).trim());break c}}}c=null}c=a._experimentCookie=c?c.split(/\s*,\s*/g):[]}a=-1!=c.indexOf(d)?!0:a.AMP_CONFIG&&
a.AMP_CONFIG.hasOwnProperty(d)?Math.random()<a.AMP_CONFIG[d]:!1;e=f[e]=a}return e};function t(a){var b=[{name:"client",value:a.getAttribute("data-ad-client")},{name:"plah",value:a.ownerDocument.location.hostname}];a=[];for(var f=4051,e=0;e<b.length;e++){var d=b[e];if(null!=d.value&&""!==d.value){var c=encodeURIComponent(d.name)+"=",d=encodeURIComponent(String(d.value)),g=c.length+d.length+1;if(g>f){(b=d.substr(0,f-c.length-1).replace(/%\w?$/,""))&&a.push(c+b);break}a.push(c+d);f-=g}}return a.length?"//pagead2.googlesyndication.com/getconfig/ama?"+a.join("&"):"//pagead2.googlesyndication.com/getconfig/ama"}
;function u(a){AMP.BaseElement.apply(this,arguments)}h(u,AMP.BaseElement);u.prototype.buildCallback=function(){l().assert(r(),"Experiment is off");var a=this.element.getAttribute("type");l().assert(a,"Missing type attribute");"adsense"==a?a=t(this.element):(l().error("amp-auto-ads","Unable to generate amp-auto-ads config URL for type: "+a),a=null);var b=a;b&&v(this,b).then(function(){})};u.prototype.isLayoutSupported=function(){return!0};
function v(a,b){var f={mode:"cors",method:"GET",requireAmpResponseSourceOrigin:!1};return p(a.win).fetchJson(b,f).catch(function(a){var b;if(k.dev)b=k.dev;else throw Error("failed to call initLogConstructor");b.error("amp-auto-ads","amp-auto-ads config xhr failed: "+a);return null})}AMP.registerElement("amp-auto-ads",u);
})});
//# sourceMappingURL=amp-auto-ads-0.1.js.map

