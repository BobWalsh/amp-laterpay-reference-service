(self.AMP = self.AMP || []).push({n:"amp-ad-network-doubleclick-impl", f:(function(AMP) {var k;function r(a,b){function d(){}d.prototype=b.prototype;a.prototype=new d;a.prototype.constructor=a;for(var c in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,c);e&&Object.defineProperty(a,c,e)}else a[c]=b[c]};Date.now();function aa(a){for(var b=null,d="",c=0;c<arguments.length;c++){var e=arguments[c];e instanceof Error&&!b?b=e:(d&&(d+=" "),d+=e)}b?d&&(b.message=d+": "+b.message):b=Error(d);return b}function u(a){var b=aa.apply(null,arguments);setTimeout(function(){throw b;})}self.log=self.log||{user:null,dev:null};var v=self.log;function w(){if(v.user)return v.user;throw Error("failed to call initLogConstructor");}function x(){if(v.dev)return v.dev;throw Error("failed to call initLogConstructor");};var ba=Object.prototype.toString;function z(a){return"[object Object]"===ba.call(a)};function ca(a,b){var d=Number(b||0);return a?d+a.replace(/\D/g,"")%1E6*1E6:Math.floor(4503599627370496*Math.random())};var da={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},ea=/(&|<|>|"|'|`)/g;function fa(a,b,d){if(b(a))d();else{var c=a.ownerDocument.defaultView;if(c.MutationObserver){var e=new c.MutationObserver(function(){b(a)&&(e.disconnect(),d())});e.observe(a,{childList:!0})}else var f=c.setInterval(function(){b(a)&&(c.clearInterval(f),d())},5)}}function ga(a,b){fa(a.documentElement,function(){return!!a.body},b)}function ha(a){return new Promise(function(b){ga(a,b)})}
function B(a,b,d){a=a.createElement(b);for(var c in d)a.setAttribute(c,d[c]);return a}function ia(a,b){for(var d,c=a;c&&c!==d;c=c.parentElement)if(b(c))return c;return null}function ja(a){var b="A";if(a.closest)return a.closest(b);b=b.toUpperCase();return ia(a,function(a){return a.tagName==b})}function ka(a){return a?a.replace(ea,la):a}function la(a){return da[a]};function C(a,b){a=D(a);var d=a.services&&a.services[b]&&a.services[b].obj;return d}function E(a,b){var d=a;if(d.nodeType)var c=(d.ownerDocument||d).defaultView,c=D(c),d=ma(c,c,"ampdoc",void 0).getAmpDoc(d);var e=d.isSingleDoc()?d.win:d;return e&&e.services&&e.services[b]&&e.services[b].obj}function na(a){if(a.nodeType){var b=oa((a.ownerDocument||a).defaultView);if(b)return b}return E(a,"url-replace")}function pa(a,b){var d=D(a);oa(a);ma(a,a,"url-replace",function(){return b})}
function oa(a){var b=D(a);return a!=b&&a.services&&a.services["url-replace"]&&a.services["url-replace"].obj?a.services["url-replace"].obj:null}function D(a){return a.__AMP_TOP||a}function ma(a,b,d,c){var e=F(a),f=e[d];f||(f=e[d]={obj:null,promise:null,resolve:null});f.obj||(f.obj=c(b),f.resolve&&f.resolve(f.obj));return f.obj}function qa(a){var b=ra(a);if(b)return b;a=F(a);var d,c=new Promise(function(a){d=a});a.cid={obj:null,promise:c,resolve:d};return c}
function ra(a){if(a=F(a).cid){var b=a.promise;if(b)return b;if(a.obj)return a.promise=Promise.resolve(a.obj)}return null}function F(a){var b=a.services;b||(b=a.services={});return b}function sa(a){a=F(a);var b={},d;for(d in a)if(b.id=d,Object.prototype.hasOwnProperty.call(a,b.id)){var c=a[b.id];c.obj?ta(b.id,c.obj):c.promise&&c.promise.then(function(a){return function(b){return ta(a.id,b)}}(b));b={id:b.id}}}
function ta(a,b){if("function"==typeof b.dispose)try{b.dispose()}catch(d){x().error("SERVICE","failed to dispose service",a,d)}};function ua(a){var b=ra(a);return b?b:Promise.resolve().then(function(){return a.ampExtendedElements&&a.ampExtendedElements["amp-analytics"]?qa(a):ha(a.document).then(function(){return a.ampExtendedElements&&a.ampExtendedElements["amp-analytics"]?qa(a):null})})};var va={_ping_:{renderStartImplemented:!0},a9:{prefetch:"https://c.amazon-adsystem.com/aax2/assoc.js"},accesstrade:{prefetch:"https://h.accesstrade.net/js/amp/amp.js"},adblade:{prefetch:"https://web.adblade.com/js/ads/async/show.js",preconnect:["https://staticd.cdn.adblade.com","https://static.adblade.com"],renderStartImplemented:!0},adbutler:{prefetch:"https://servedbyadbutler.com/app.js"},adform:{},adgeneration:{prefetch:"https://i.socdm.com/sdk/js/adg-script-loader.js"},adition:{},adman:{},adreactor:{},
adsense:{prefetch:"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",preconnect:"https://googleads.g.doubleclick.net",clientIdScope:"AMP_ECID_GOOGLE"},adsnative:{prefetch:"https://static.adsnative.com/static/js/render.v1.js",preconnect:"https://api.adsnative.com"},adspirit:{},adstir:{prefetch:"https://js.ad-stir.com/js/adstir_async.js",preconnect:"https://ad.ad-stir.com"},adtech:{prefetch:"https://s.aolcdn.com/os/ads/adsWrapper3.js",preconnect:["https://mads.at.atwola.com","https://aka-cdn.adtechus.com"]},
aduptech:{prefetch:"https://s.d.adup-tech.com/jsapi"},adverline:{prefetch:"https://ads.adverline.com/richmedias/amp.js",preconnect:["https://adnext.fr"],renderStartImplemented:!0},advertserve:{renderStartImplemented:!0},affiliateb:{prefetch:"https://track.affiliate-b.com/amp/a.js",renderStartImplemented:!0},amoad:{prefetch:["https://j.amoad.com/js/a.js","https://j.amoad.com/js/n.js"],preconnect:["https://d.amoad.com","https://i.amoad.com","https://m.amoad.com","https://v.amoad.com"]},appnexus:{prefetch:"https://acdn.adnxs.com/ast/ast.js",
preconnect:"https://ib.adnxs.com"},atomx:{prefetch:"https://s.ato.mx/p.js"},caprofitx:{prefetch:["https://cdn.caprofitx.com/pfx.min.js","https://cdn.caprofitx.com/tags/amp/profitx_amp.js"],preconnect:"https://ad.caprofitx.adtdp.com"},chargeads:{},colombia:{prefetch:"https://static.clmbtech.com/ad/commons/js/colombia-amp.js"},contentad:{},criteo:{prefetch:"https://static.criteo.net/js/ld/publishertag.js",preconnect:"https://cas.criteo.com"},dotandads:{prefetch:"https://amp.ad.dotandad.com/dotandadsAmp.js",
preconnect:"https://bal.ad.dotandad.com"},doubleclick:{prefetch:["https://www.googletagservices.com/tag/js/gpt.js","https://securepubads.g.doubleclick.net/static/glade.js"],preconnect:["https://partner.googleadservices.com","https://tpc.googlesyndication.com"],clientIdScope:"AMP_ECID_GOOGLE",renderStartImplemented:!0},eplanning:{prefetch:"https://us.img.e-planning.net/layers/epl-amp.js"},ezoic:{prefetch:["https://www.googletagservices.com/tag/js/gpt.js","https://g.ezoic.net/ezoic/ampad.js"]},f1e:{prefetch:"https://img.ak.impact-ad.jp/util/f1e_amp.min.js"},
fake:{},felmat:{prefetch:"https://t.felmat.net/js/fmamp.js",renderStartImplemented:!0},flite:{},genieessp:{prefetch:"https://js.gsspcln.jp/l/amp.js"},gmossp:{prefetch:"https://cdn.gmossp-sp.jp/ads/amp.js"},holder:{prefetch:"https://i.holder.com.ua/js2/holder/ajax/ampv1.js",preconnect:"https://h.holder.com.ua",renderStartImplemented:!0},ibillboard:{},imobile:{prefetch:"https://spamp.i-mobile.co.jp/script/amp.js",preconnect:"https://spad.i-mobile.co.jp"},improvedigital:{},industrybrains:{prefetch:"https://web.industrybrains.com/js/ads/async/show.js",
preconnect:["https://staticd.cdn.industrybrains.com","https://static.industrybrains.com"],renderStartImplemented:!0},inmobi:{prefetch:"https://cf.cdn.inmobi.com/ad/inmobi.secure.js",renderStartImplemented:!0},ix:{prefetch:"https://js-sec.indexww.com/indexJTag.js",preconnect:"https://as-sec.casalemedia.com"},kargo:{},kixer:{prefetch:"https://cdn.kixer.com/ad/load.js",renderStartImplemented:!0},ligatus:{},loka:{prefetch:"https://loka-cdn.akamaized.net/scene/amp.js",preconnect:["https://scene-front.lokaplatform.com",
"https://loka-materials.akamaized.net"],renderStartImplemented:!0},mads:{prefetch:"https://eu2.madsone.com/js/tags.js"},"mantis-display":{prefetch:"https://assets.mantisadnetwork.com/mantodea.min.js",preconnect:["https://mantodea.mantisadnetwork.com","https://res.cloudinary.com","https://resize.mantisadnetwork.com"]},"mantis-recommend":{prefetch:"https://assets.mantisadnetwork.com/recommend.min.js",preconnect:["https://mantodea.mantisadnetwork.com","https://resize.mantisadnetwork.com"]},mediaimpact:{prefetch:"https://ec-ns.sascdn.com/diff/251/pages/amp_default.js",
preconnect:["https://ww251.smartadserver.com","https://static.sascdn.com/"],renderStartImplemented:!0},medianet:{preconnect:"https://contextual.media.net",renderStartImplemented:!0},mediavine:{prefetch:"https://www.googletagservices.com/tag/js/gpt.js",preconnect:["https://partner.googleadservices.com","https://securepubads.g.doubleclick.net","https://tpc.googlesyndication.com"],renderStartImplemented:!0},meg:{renderStartImplemented:!0},microad:{prefetch:"https://j.microad.net/js/camp.js",preconnect:["https://s-rtb.send.microad.jp",
"https://s-rtb.send.microadinc.com","https://cache.send.microad.jp","https://cache.send.microadinc.com","https://deb.send.microad.jp"]},mixpo:{prefetch:"https://cdn.mixpo.com/js/loader.js",preconnect:["https://player1.mixpo.com","https://player2.mixpo.com"]},nativo:{prefetch:"https://s.ntv.io/serve/load.js"},nend:{prefetch:"https://js1.nend.net/js/amp.js",preconnect:["https://output.nend.net","https://img1.nend.net"]},nokta:{prefetch:"https://static.virgul.com/theme/mockups/noktaamp/ampjs.js",renderStartImplemented:!0},
openadstream:{},openx:{prefetch:"https://www.googletagservices.com/tag/js/gpt.js",preconnect:["https://partner.googleadservices.com","https://securepubads.g.doubleclick.net","https://tpc.googlesyndication.com"]},plista:{},pubmatic:{prefetch:"https://ads.pubmatic.com/AdServer/js/amp.js"},pubmine:{prefetch:["https://s.pubmine.com/head.js","https://s.pubmine.com/showad.js"],preconnect:"https://delivery.g.switchadhub.com",renderStartImplemented:!0},pulsepoint:{prefetch:"https://ads.contextweb.com/TagPublish/getjs.static.js",
preconnect:"https://tag.contextweb.com"},purch:{prefetch:"https://ramp.purch.com/serve/creative_amp.js",renderStartImplemented:!0},revcontent:{prefetch:"https://labs-cdn.revcontent.com/build/amphtml/revcontent.amp.min.js",preconnect:["https://trends.revcontent.com","https://cdn.revcontent.com","https://img.revcontent.com"]},rubicon:{},sharethrough:{renderStartImplemented:!0},smartadserver:{prefetch:"https://ec-ns.sascdn.com/diff/js/amp.v0.js",preconnect:"https://static.sascdn.com",renderStartImplemented:!0},
smartclip:{prefetch:"https://cdn.smartclip.net/amp/amp.v0.js",preconnect:"https://des.smartclip.net",renderStartImplemented:!0},sortable:{prefetch:"https://www.googletagservices.com/tag/js/gpt.js",preconnect:["https://tags-cdn.deployads.com","https://partner.googleadservices.com","https://securepubads.g.doubleclick.net","https://tpc.googlesyndication.com"]},sovrn:{prefetch:"https://ap.lijit.com/www/sovrn_amp/sovrn_ads.js"},taboola:{},teads:{prefetch:"https://cdn.teads.tv/media/format/v3/teads-format.min.js",
preconnect:["https://cdn2.teads.tv","https://a.teads.tv","https://t.teads.tv"]},triplelift:{},webediads:{prefetch:"https://eu1.wbdds.com/amp.min.js",preconnect:["https://goutee.top","https://mediaathay.org.uk"],renderStartImplemented:!0},"weborama-display":{prefetch:["https://cstatic.weborama.fr/js/advertiserv2/adperf_launch_1.0.0_scrambled.js","https://cstatic.weborama.fr/js/advertiserv2/adperf_core_1.0.0_scrambled.js"]},widespace:{},xlift:{prefetch:"https://cdn.x-lift.jp/resources/common/xlift_amp.js",
renderStartImplemented:!0},yahoo:{prefetch:"https://s.yimg.com/os/ampad/display.js",preconnect:"https://us.adserver.yahoo.com"},yahoojp:{prefetch:["https://s.yimg.jp/images/listing/tool/yads/ydn/amp/amp.js","https://yads.c.yimg.jp/js/yads.js"],preconnect:"https://yads.yahoo.co.jp"},yieldbot:{prefetch:["https://cdn.yldbt.com/js/yieldbot.intent.amp.js","https://msg.yldbt.com/js/ybmsg.html"],preconnect:"https://i.yldbt.com"},yieldmo:{prefetch:"https://static.yieldmo.com/ym.amp1.js",preconnect:["https://s.yieldmo.com",
"https://ads.yieldmo.com"],renderStartImplemented:!0},yieldone:{prefetch:"https://img.ak.impact-ad.jp/ic/pone/commonjs/yone-amp.js"},zedo:{prefetch:"https://ss3.zedo.com/gecko/tag/Gecko.amp.min.js",renderStartImplemented:!0},zergnet:{},zucks:{preconnect:["https://j.zucks.net.zimg.jp","https://sh.zucks.net","https://k.zucks.net","https://static.zucks.net.zimg.jp"]}};function wa(a){var b=va[a.element.getAttribute("type")],d=b?b.clientIdScope:null;if(!d)return Promise.resolve();var c=ua(a.win).then(function(a){if(a)return a.get(d,Promise.resolve()).catch(function(a){x().error("AD-CID",a)})});return C(a.win,"timer").timeoutPromise(1E3,c,"cid timeout").catch(function(a){x().warn("AD-CID",a)})};function G(a){return E(a,"documentInfo").get()};function xa(a){var b="-dev",d=a.length-b.length;0<=d&&a.indexOf(b,d)};var ya=/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org/,za=/^https?:\/\/localhost(:\d+)?$/;var H,I;
function J(a,b){H||(H=self.document.createElement("a"),I=self.UrlCache||(self.UrlCache=Object.create(null)));var d=I[a];if(d)return d;H.href=a;H.protocol||(H.href=H.href);var c={href:H.href,protocol:H.protocol,host:H.host,hostname:H.hostname,port:"0"==H.port?"":H.port,pathname:H.pathname,search:H.search,hash:H.hash,origin:null};"/"!==c.pathname[0]&&(c.pathname="/"+c.pathname);if("http:"==c.protocol&&80==c.port||"https:"==c.protocol&&443==c.port)c.port="",c.host=c.hostname;c.origin=H.origin&&"null"!=
H.origin?H.origin:"data:"!=c.protocol&&c.host?c.protocol+"//"+c.host:c.href;var e=c;return b?e:I[a]=e}function Aa(a){var b=Object.create(null);if(!a)return b;if(0==a.indexOf("?")||0==a.indexOf("#"))a=a.substr(1);a=a.split("&");for(var d=0;d<a.length;d++){var c=a[d],e=c.indexOf("="),f;-1!=e?(f=decodeURIComponent(c.substring(0,e)).trim(),c=decodeURIComponent(c.substring(e+1)).trim()):(f=decodeURIComponent(c).trim(),c="");f&&(b[f]=c)}return b}
function K(a){"string"==typeof a&&(a=J(a));return ya.test(a.origin)};function Ba(a){return"undefined"!==typeof TextDecoder?Promise.resolve((new TextDecoder("utf-8")).decode(a)):new Promise(function(b,d){var c=new FileReader;c.onerror=function(){d(c.error)};c.onloadend=function(){b(c.result)};c.readAsText(new Blob([a]))})}
function Ca(a){return"undefined"!==typeof TextEncoder?Promise.resolve((new TextEncoder("utf-8")).encode(a)):new Promise(function(b,d){var c=new FileReader;c.onerror=function(){d(c.error)};c.onloadend=function(){b(new Uint8Array(c.result))};c.readAsArrayBuffer(new Blob([a]))})}function Da(a){for(var b=new Uint8Array(a.length),d=0;d<a.length;d++){var c=a.charCodeAt(d);b[d]=c}return b};var Ea={"-":"+",_:"/",".":"="};function L(a){var b=atob(a.replace(/[-_.]/g,function(a){return Ea[a]}));return Da(b)};function Fa(a){for(var b=a.length,d=5381,c=0;c<b;c++)d=33*d^a.charCodeAt(c);return String(d>>>0)};function Ga(a){for(var b=[],d=0;a&&1==a.nodeType&&25>d;){var c="";a.id&&(c="/"+a.id);var e=a.nodeName.toLowerCase();b.push(""+e+c+Ha(a));d++;a=a.parentElement}return b.join()}function Ha(a){for(var b=a.nodeName,d=0,c=0,e=a.previousElementSibling;e&&25>c&&100>d;)e.nodeName==b&&c++,d++,e=e.previousElementSibling;return 25>c&&100>d?"."+c:""};function Ia(a,b){var d=a.crypto&&(a.crypto.subtle||a.crypto.webkitSubtle),c=b.dataset&&b.dataset.multiSize;return d&&!c&&(K(a.location)||!1||!1)}
function Ja(a,b,d,c){var e=E(a.getAmpDoc(),"viewer").getReferrerUrl();return wa(a).then(function(f){return e.then(function(e){var g=a,h=c,n=e,l=g.win,q=G(g.element);l.gaGlobal||(l.gaGlobal={vid:f,hid:q.pageViewId});for(var t=g.getIntersectionElementLayoutBox(),y=g.getViewport().getRect(),p=l,A=0;p!=p.parent;)p=p.parent,A++;p={name:"dtd"};g=g.element;h=d.concat([{name:"is_amp",value:"3"},{name:"amp_v",value:"1481126804163"},{name:"d_imp",value:"1"},{name:"dt",value:b},{name:"adf",value:Fa(Ga(g))},
{name:"c",value:ca(f,q.pageViewId)},{name:"output",value:"html"},{name:"nhd",value:A},{name:"eid",value:g.getAttribute("data-experiment-id")},{name:"biw",value:y.width},{name:"bih",value:y.height},{name:"adx",value:t.left},{name:"ady",value:t.top},{name:"u_hist",value:Ka(l)},p],h,[{name:"url",value:q.canonicalUrl},{name:"top",value:A?La(l):null},{name:"loc",value:l.location.href==q.canonicalUrl?null:l.location.href},{name:"ref",value:n}]);n=Date.now()-b;p.value=1E6<=n?"M":0<=n?n:"-M";l={name:"trunc",
value:"1"};n=[];l=l&&null!=l.value&&""!==l.value?encodeURIComponent(l.name)+"="+encodeURIComponent(String(l.value)):null;t=4047;l&&(t-=l.length+1);for(y=0;y<h.length;y++)if(p=h[y],null!=p.value&&""!==p.value){q=encodeURIComponent(p.name)+"=";p=encodeURIComponent(String(p.value));g=q.length+p.length+1;if(g>t){(h=p.substr(0,t-q.length-1).replace(/%\w?$/,""))&&n.push(q+h);l&&n.push(l);break}n.push(q+p);t-=g}return n.length?"https://securepubads.g.doubleclick.net/gampad/ads?"+n.join("&"):"https://securepubads.g.doubleclick.net/gampad/ads"})})}
function Ka(a){try{return a.history.length}catch(b){return 0}}function La(a){var b=a.location.ancestorOrigins;if(b){var d=a.location.origin,c=b[b.length-1];if(d==c)return a.top.location.href;var e=Ma(a);return e==a||d==b[b.length-2]?e.document.referrer:c}try{return a.top.location.href}catch(f){}a=Ma(a);try{return a.document.referrer}catch(f){}return null}function Ma(a){for(;a.parent!=a.parent.parent;)a=a.parent;return a}
function Na(a,b){a.ampAdPageCorrelator||(a.ampAdPageCorrelator=ca(b,G(a.document).pageViewId));return a.ampAdPageCorrelator};var M;function N(a,b){var d=M||(M=Object.create(null));if(b in d)a=d[b];else{var c=b;a=-1!=Oa(a).indexOf(c)?!0:a.AMP_CONFIG&&a.AMP_CONFIG.hasOwnProperty(c)?Math.random()<a.AMP_CONFIG[c]:!1;a=d[b]=a}return a}
function Oa(a){if(a._experimentCookie)return a._experimentCookie;var b;a:{b:{try{b=a.document.cookie;break b}catch(g){}b=void 0}if(b){b=b.split(";");for(var d=0;d<b.length;d++){var c=b[d].trim(),e=c.indexOf("=");if(-1!=e&&"AMP_EXP"==decodeURIComponent(c.substring(0,e).trim())){b=decodeURIComponent(c.substring(e+1).trim());break a}}}b=null}var f=b;return a._experimentCookie=f?f.split(/\s*,\s*/g):[]};function Pa(a,b,d,c,e){if(Ia(a,b)){var f=d,g=c.control,m=c.experiment,h=E(b,"viewer").getParam("exp")||Aa(a.location.search).exp;if(h&&(h=(h=/(^|,)(a4a:[^,]*)/.exec(h))&&h[2])){var n=h.split(":",2)[1],g={"-1":"117152632",0:null,1:g,2:m};if(g.hasOwnProperty(n)){g=g[n];a.pageExperimentBranches=a.pageExperimentBranches||{};var l=!!g,m=M||(M=Object.create(null)),h=Oa(a),n=-1!=h.indexOf(f)||f in m&&m[f],l=void 0!==l?l:!n;l!=n&&(l?(h.push(f),m[f]=!0):(h.splice(h.indexOf(f),1),m[f]=!1));a.pageExperimentBranches[f]=
g}else x().warn("A4A-CONFIG","Unknown a4a URL parameter: ",h," expected one of -1 (manual), 0 (not in experiment), 1 (control branch), or 2 (a4a experiment branch)")}var q={};q[d]=e;Qa(a,q);if(N(a,d)){var t=a.pageExperimentBranches[d];a=t;(f=b.getAttribute("data-experiment-id"))&&Ra(Sa(f))?b.setAttribute("data-experiment-id",Ta(a,f)):b.setAttribute("data-experiment-id",a);return t==e.experiment||t==c.experiment||"117152632"==t}}return!1}
function Qa(a,b){a.pageExperimentBranches=a.pageExperimentBranches||{};for(var d in b)if(b.hasOwnProperty(d)&&!a.pageExperimentBranches.hasOwnProperty(d)&&!a.pageExperimentBranches[d]&&N(a,d)){var c=b[d],e=Object.keys(c),f=e[Math.floor(Math.random()*e.length)];a.pageExperimentBranches[d]=c[f]}}function Sa(a){return a?a.split(","):[]}function O(a){return Sa(a.getAttribute("data-experiment-id")).some(function(a){return"117152632"===a})}
function Ra(a){return a.every(function(a){return!isNaN(parseInt(a,10))})}function Ta(a,b){return a&&!isNaN(parseInt(a,10))?b?b+","+a:a:b||""};var Ua={control:"117152650",experiment:"117152651"},Va={control:"117152670",experiment:"117152671"};var Wa={control:"117152660",experiment:"117152661"},Xa={control:"117152680",experiment:"117152681"};(function(a){var b=Object.create(null);a&&Object.assign(b,a);return b})({adsense:function(a,b){return Pa(a,b,"expAdsenseA4A",Ua,Va)},doubleclick:function(a,b){if(a.document.querySelector("meta[name=amp-3p-iframe-src]"))return!1;var d=b.hasAttribute("data-use-beta-a4a-implementation"),c=Pa(a,b,"expDoubleclickA4A",Wa,Xa)||d&&(K(a.location)||!1||!1);c&&d&&!O(b)&&b.setAttribute("data-experiment-id","2077831");return c}});var Ya={google:"https://cdn.ampproject.org/amp-ad-verifying-keyset.json","google-dev":"https://cdn.ampproject.org/amp-ad-verifying-keyset-dev.json"};function Za(a,b){if(!(a.defaultPrevented||0!=a.buttons&&1!=a.buttons||a.ctrlKey||a.altKey||a.shiftKey||a.metaKey)){var d=$a(a);if(d&&d.eventualUrl&&!1!==a.isTrusted){var c=encodeURIComponent,e,f=d.a.href;e=encodeURIComponent("amp")+"="+encodeURIComponent("1");if(e){var f=f.split("#",2),g=f[0].split("?",2);e=g[0]+(g[1]?"?"+e+"&"+g[1]:"?"+e);e+=f[1]?"#"+f[1]:""}else e=f;var m="click="+c(e);e=d.eventualUrl;e=-1==d.eventualUrl.indexOf("#")?e+("#"+m):e+("&"+m);c=d.a.ownerDocument.defaultView;(f=c.location.ancestorOrigins)&&
"http://localhost:8000"==f[f.length-1]&&(e=e.replace(J(d.eventualUrl).host+"/c/","http://localhost:8000/max/"));a.preventDefault();if(b)b(e);else{a=e;e=(d.a.target||"_top").toLowerCase();if(c.location.ancestorOrigins)if(f=c.location.ancestorOrigins,2>f.length||-1==f[f.length-1].indexOf(".google."))f=null;else{var g=f[f.length-2],h;(h=K(g))||(h=g,"string"==typeof h&&(h=J(h)),h=za.test(h.origin));if(h){h=c;for(var n=0;n<f.length-1;n++)h=h.parent;f={win:h,origin:g}}else f=null}else f=null;if(f)f.win.postMessage("a2a;"+
JSON.stringify({url:a}),f.origin);else{var l;try{l=c.open(a,e,void 0)}catch(q){x().error("DOM","Failed to open url on target: ",e,q)}l||"_top"==e||c.open(a,"_top")}}}}}function $a(a){var b=ia(a.target,function(a){return"A"==a.tagName&&a.href});if(b)return{eventualUrl:ab(b),a:b}}function ab(a){var b=a.getAttribute("data-url-param-name")||"adurl",d=Aa(a.search)[b];if(a=d)if(a=K(d))a=J(d).pathname,a=3>a.length?!1:0==a.lastIndexOf("/c/",0);if(a)return d};function P(a,b,d){function c(a){d(a);e()}var e;e=function(){a&&a.removeEventListener(b,c,!1);d=c=a=null};a.addEventListener(b,c,!1);return e}function bb(a){var b,d;if(a.complete||"complete"==a.readyState||a.document&&"complete"==a.document.readyState)return Promise.resolve(a);var c=new Promise(function(c,f){var e=a.tagName;b="AUDIO"===e||"VIDEO"===e?P(a,"loadstart",c):P(a,"load",c);e&&(d=P(a,"error",f))}),c=c.then(function(){return a},cb);return db(c,b,d)}
function cb(a){(a=a.target)&&a.src&&(a=a.src);throw w().createError("Failed to load:",a);}function db(a,b,d){var c=void 0,e;e=void 0===c?a:C(self,"timer").timeoutPromise(c||0,a);b&&e.then(b,b);d&&e.then(d,d);return e};var Q,eb="Webkit webkit Moz moz ms O o".split(" ");function R(a,b,d){var c,e=a.style;Q||(Q=Object.create(null));var f=Q[b];if(!f){f=b;if(void 0===e[b]){var g=b.charAt(0).toUpperCase()+b.slice(1);a:{for(var m=0;m<eb.length;m++){var h=eb[m]+g;if(void 0!==e[h]){g=h;break a}}g=""}void 0!==e[g]&&(f=g)}Q[b]=f}(b=f)&&(a.style[b]=c?d+c:d)};self.AMPErrors=self.AMPErrors||[];function fb(a){return"complete"==a.readyState}function gb(a,b){var d=fb,c=d(a);if(c)b(a);else{var e=function(){d(a)&&(c||(c=!0,b(a)),a.removeEventListener("readystatechange",e))};a.addEventListener("readystatechange",e)}}function hb(a){return new Promise(function(b){gb(a,b)})};var S;
function ib(a,b,d,c){var e=D(a.ownerDocument.defaultView),f=C(e,"extensions");R(a,"visibility","hidden");a.setAttribute("referrerpolicy","unsafe-url");d.extensionIds&&d.extensionIds.forEach(function(a){return f.loadExtension(a)});var g=jb(d);a.onload=function(){a.readyState="complete"};var m;void 0===S&&(S="srcdoc"in HTMLIFrameElement.prototype);if(S)a.srcdoc=g,m=bb(a),b.appendChild(a);else{a.src="about:blank";b.appendChild(a);var h=a.contentWindow.document;h.open();h.write(g);m=bb(a.contentWindow);h.close()}var n;
n=kb(a)?Promise.resolve():new Promise(function(b){var c=e.setInterval(function(){kb(a)&&(b(),e.clearInterval(c))},5);m.catch(function(a){u(a)}).then(function(){b();e.clearInterval(c)})});return n.then(function(){var b=a.contentWindow;f.installExtensionsInChildWindow(b,d.extensionIds||[],c);R(a,"visibility","");if(b.document&&b.document.body){var b=b.document.body,e={opacity:1,visibility:"visible",animation:"none"},g;for(g in e)R(b,g,e[g])}return new T(a,d,m)})}
function kb(a){a=a.contentWindow&&a.contentWindow.document;return!!(a&&"loading"!=a.readyState&&"uninitialized"!=a.readyState&&a.body&&a.body.firstChild)}
function jb(a){var b=a.html,d=b.toUpperCase(),c=d.indexOf("<HEAD");-1!=c&&(c=d.indexOf(">",c+1)+1);-1==c&&(c=d.indexOf("<BODY"));-1==c&&(c=d.indexOf("<HTML"),-1!=c&&(c=d.indexOf(">",c+1)+1));var e=[];0<c&&e.push(b.substring(0,c));e.push('<base href="'+ka(a.url)+'">');a.fonts&&a.fonts.forEach(function(a){e.push('<link href="'+ka(a)+'" rel="stylesheet" type="text/css">')});0<c?e.push(b.substring(c)):e.push(b);return e.join("")}
function T(a,b,d){this.iframe=a;this.win=a.contentWindow;this.spec=b;this.O=d}T.prototype.whenLoaded=function(){return this.O};T.prototype.destroy=function(){E(this.iframe,"resources").removeForChildWindow(this.win);sa(this.win)};var lb={"AMP-FX-FLYING-CARPET":!0,"AMP-LIGHTBOX":!0,"AMP-STICKY-AD":!0};function mb(a,b){var d=!1,c=0;do lb[a.tagName]?(c++,d=!1):"fixed"==b.getComputedStyle(a).position&&(d=!0),a=a.parentElement;while(a&&"BODY"!=a.tagName);return!d&&1>=c};function nb(a){var b;b=void 0===b?1:b;return new Promise(function(d,c){function e(a){h.length<=g&&h.push(a);h.length>g&&c(h)}function f(a){m.length<b&&m.push(a);m.length==b&&d(m)}b=Math.max(b,0);var g=a.length-b;0>g&&c(Error("not enough promises to resolve"));0==a.length&&d([]);for(var m=[],h=[],n=0;n<a.length;n++)Promise.resolve(a[n]).then(f,e)})};function U(a){this.b=a;this.state=0;this.H=!!a.getFallback()}U.prototype.init=function(){if(N(this.b.win,"amp-ad-loading-ux")&&!this.H){var a=B(document,"div",{fallback:""});a.classList.add("amp-ad-default-fallback");this.b.element.appendChild(a)}};
U.prototype.setDisplayState=function(a){if(0!=this.state||1==a)switch(a){case 1:this.state=1;this.b.togglePlaceholder(!0);break;case 2:this.state=2;this.b.togglePlaceholder(!1);break;case 3:ob(this);break;case 0:pb(this);break;default:x().error("AmpAdUIHandler","state is not supported")}};
function ob(a){a.H?a.b.deferMutate(function(){0!=a.state&&(a.b.togglePlaceholder(!1),a.b.toggleFallback(!0),a.state=3)}):a.b.attemptChangeHeight(0).then(function(){a.b.collapse();a.state=3},function(){a.b.togglePlaceholder(!1);a.b.toggleFallback(!0);a.state=3})}function pb(a){a.state=0;a.b.deferMutate(function(){0==a.state&&(a.b.togglePlaceholder(!0),a.b.toggleFallback(!1))})}AMP.AmpAdUIHandler=U;function qb(a,b,d){var c=rb(a,b,d);return""===c?hb(a.document).then(function(){return rb(a,b,d)}):Promise.resolve(c)}function rb(a,b,d){var c=a.performance&&a.performance.timing;if(c&&0!=c.navigationStart&&(a=void 0===d?c[b]:c[d]-c[b],"number"===typeof a&&isFinite(a)))return 0>a?"":a}function sb(a,b){var d=a.performance&&a.performance.navigation;if(d&&void 0!==d[b])return d[b]}function tb(){this.l=void 0;this.c=Object.create(null);this.v=!1}k=tb.prototype;k.initialize=function(){};
k.get=function(a){this.v||(this.initialize(),this.v=!0);return this.c[a]};k.set=function(a,b){a.indexOf("RETURN");this.c[a]=this.c[a]||{sync:void 0,async:void 0};this.c[a].sync=b;this.l=void 0;return this};k.setAsync=function(a,b){a.indexOf("RETURN");this.c[a]=this.c[a]||{sync:void 0,async:void 0};this.c[a].async=b;this.l=void 0;return this};k.setBoth=function(a,b,d){return this.set(a,b).setAsync(a,d)};
k.getExpr=function(a){var b=this;this.v||(this.initialize(),this.v=!0);var d=a?Object.keys(a):null;if(d&&0<d.length){var c=Object.keys(this.c);d.forEach(function(a){void 0===b.c[a]&&c.push(a)});return ub(c)}this.l||(this.l=ub(Object.keys(this.c)));return this.l};function ub(a){a.sort(function(a,b){return b.length-a.length});var b=a.join("|");return new RegExp("\\$?("+b+")(?:\\(([0-9a-zA-Z-_.,]+)\\))?","g")};var vb="RANDOM COUNTER CANONICAL_URL CANONICAL_HOST CANONICAL_HOSTNAME CANONICAL_PATH DOCUMENT_REFERRER TITLE AMPDOC_URL AMPDOC_HOST AMPDOC_HOSTNAME SOURCE_URL SOURCE_HOST SOURCE_HOSTNAME SOURCE_PATH PAGE_VIEW_ID CLIENT_ID VARIANT VARIANTS SHARE_TRACKING_INCOMING SHARE_TRACKING_OUTGOING TIMESTAMP TIMEZONE SCROLL_TOP SCROLL_LEFT SCROLL_HEIGHT SCROLL_WIDTH VIEWPORT_HEIGHT VIEWPORT_WIDTH SCREEN_WIDTH SCREEN_HEIGHT AVAILABLE_SCREEN_HEIGHT AVAILABLE_SCREEN_WIDTH SCREEN_COLOR_DEPTH DOCUMENT_CHARSET BROWSER_LANGUAGE VIEWER TOTAL_ENGAGED_TIME AMP_VERSION".split(" ");
function wb(a,b){tb.call(this);this.M=na(a).getVariableSource();this.o=b}r(wb,tb);
wb.prototype.initialize=function(){var a=this;this.set("AD_NAV_TIMING",function(b,c){w().assert(b,"The first argument to AD_NAV_TIMING, the start attribute name, is required");return rb(a.o,b,c)}).setAsync("AD_NAV_TIMING",function(b,c){w().assert(b,"The first argument to AD_NAV_TIMING, the start attribute name, is required");return qb(a.o,b,c)});this.set("AD_NAV_TYPE",function(){return sb(a.o,"type")});this.set("AD_NAV_REDIRECT_COUNT",function(){return sb(a.o,"redirectCount")});for(var b=0;b<vb.length;b++){var d=
vb[b],c=this.M.get(d);this.set(d,c.sync).setAsync(d,c.async)}};function xb(a){var b=a["3pla"];b||(b={},a["3pla"]=b);var d=C(a,"timer").delay(function(){C(a,"timer").cancel(d);var b=a["3pla"];b&&delete b[d]},1E3);b[d]=1};var yb=window.crypto&&"webkitSubtle"in window.crypto,V=yb?window.crypto.webkitSubtle:window.crypto.subtle;
function zb(a){return(yb?Ca(JSON.stringify(a)):Promise.resolve(a)).then(function(a){return V.importKey("jwk",a,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}).then(function(b){if("string"!=typeof a.n||"string"!=typeof a.e)throw Error("missing fields in JSON Web Key");var d=L(a.n),c=L(a.e),e=Ab(d),f=Ab(c),g=new Uint8Array(e.length+f.length);g.set(e);g.set(f,e.length);return V.digest({name:"SHA-1"},g).then(function(a){return{cryptoKey:b,hash:new Uint8Array(a,0,4)}})})}
function Bb(a,b,d){var c;if(c=5<b.length&&0==b[0])a:if(c=d.hash,b&&c){for(var e=0;4>e;e++)if(b[e+1]!==c[e]){c=!1;break a}c=!0}else c=!1;if(!c)return Promise.resolve(!1);var f=new Uint8Array(a.length+1);f.set(a);f[a.length]=0;return V.verify({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},d.cryptoKey,b.subarray(5),f)}function Ab(a){var b=new Uint8Array(4+a.length);b[0]=a.length>>24&255;b[1]=a.length>>16&255;b[2]=a.length>>8&255;b[3]=a.length&255;b.set(a,4);return b};function Cb(a,b){this.ampdoc=a;this.G=b}k=Cb.prototype;k.expandSync=function(a,b,d,c){return this.expandUrlSync(a,b,d,c)};k.expandAsync=function(a,b){return this.expandUrlAsync(a,b)};k.expandStringSync=function(a,b,d,c){return W(this,a,b,d,!0,c)};k.expandStringAsync=function(a,b){return W(this,a,b)};k.expandUrlSync=function(a,b,d,c){return Db(a,W(this,a,b,d,!0,c))};k.expandUrlAsync=function(a,b){return W(this,a,b).then(function(b){return Db(a,b)})};
k.maybeExpandLink=function(a){if(N(this.ampdoc.win,"link-url-replace")){var b=a.getAttribute("data-amp-replace");if(b){var d=G(this.ampdoc),c=a["amp-original-href"]||a.getAttribute("href"),e=J(c);if(e.origin!=J(d.canonicalUrl).origin&&e.origin!=J(d.sourceUrl).origin)w().warn("URL","Ignoring link replacement",c," because the link does not go to the document's source or canonical origin.");else{null==a["amp-original-href"]&&(a["amp-original-href"]=c);var f={CLIENT_ID:!0,QUERY_PARAM:!0},g={};b.trim().split(/\s*,\s*/).forEach(function(a){f.hasOwnProperty(a)?
g[a]=!0:w().warn("URL","Ignoring unsupported link replacement",a)});return a.href=this.expandSync(c,void 0,void 0,g)}}}};
function W(a,b,d,c,e,f){var g=a.G.getExpr(d),m,h=b.replace(g,function(b,g,q){var n=[];"string"==typeof q&&(n=q.split(","));if(f&&!f[g])return b;var l;if(d&&g in d)l=d[g];else if(l=a.G.get(g))if(e){if(l=l.sync,!l)return w().error("UrlReplacements","ignoring async replacement key: ",g),""}else l=l.async||l.sync;var p;try{p="function"==typeof l?l.apply(null,n):l}catch(Mb){e&&(p=""),u(Mb)}if(p&&p.then){if(e)return w().error("UrlReplacements","ignoring promise value for key: ",g),"";var A=p.catch(function(a){u(a)}).then(function(a){h=
h.replace(b,null==a?"":encodeURIComponent(a));c&&(c[b]=a)});m=m?m.then(function(){return A}):A;return b}c&&(c[b]=p);return null==p?"":encodeURIComponent(p)});m&&(m=m.then(function(){return h}));return e?h:m||Promise.resolve(h)}k.collectVars=function(a,b){var d=Object.create(null);return W(this,a,b,d).then(function(){return d})};
function Db(a,b){var d=J(b,!0).protocol,c=J(a,!0).protocol;if(d!=c)return w().error("UrlReplacements","Illegal replacement of the protocol: ",a),a;w().assert("javascript:"!==d,"Illegal javascript link protocol: %s",a);return b}k.getVariableSource=function(){return this.G};function Eb(a){return Array.isArray(a)&&2==a.length&&"number"===typeof a[0]&&"number"===typeof a[1]}var Fb={frameborder:"0",allowfullscreen:"",allowtransparency:"",scrolling:"no",marginwidth:"0",marginheight:"0"},Gb={adSlotBuilt:"0",urlBuilt:"1",adRequestStart:"2",adRequestEnd:"3",extractCreativeAndSignature:"4",adResponseValidateStart:"5",renderFriendlyStart:"6",renderCrossDomainStart:"7",renderFriendlyEnd:"8",renderCrossDomainEnd:"9",preAdThrottle:"10",renderSafeFrameStart:"11",adSlotCleared:"20"};
function X(a){AMP.BaseElement.call(this,a);this.s=null;this.A=0;this.h=this.uiHandler=this.f=this.config=null;this.w=this.B=!1;this.K=this.getVsync();this.win.ampA4aValidationKeys||(this.win.ampA4aValidationKeys=Hb(this));this.i=null;this.j=C(this.win,"platform").isIos()?"safeframe":null;this.emitLifecycleEvent("adSlotBuilt")}r(X,AMP.BaseElement);k=X.prototype;k.getPriority=function(){return 2};
k.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a};k.buildCallback=function(){var a=this.element.getAttribute("type");this.config=va[a]||{};this.uiHandler=new AMP.AmpAdUIHandler(this);this.uiHandler.init()};
k.renderOutsideViewport=function(){var a;a:{a=this.element;var b=this.win["3pla"]||{},d;for(d in b)if(Object.prototype.hasOwnProperty.call(b,d)){a=!1;break a}a="prefer-viewability-over-views"==a.getAttribute("data-loading-strategy")?1.25:!0}var c=a;return!0!==c?c:AMP.BaseElement.prototype.renderOutsideViewport.call(this)};k.isValidElement=function(){return!0};k.isAmpAdElement=function(){return"AMP-AD"==this.element.tagName||"AMP-EMBED"==this.element.tagName};
k.preconnectCallback=function(){var a=this;this.preconnect.url("https://tpc.googlesyndication.com/safeframe/1-0-4/html/container.html");if(this.config){var b=this.config.preconnect;"string"==typeof b?this.preconnect.url(b,!0):b&&b.forEach(function(b){a.preconnect.url(b,!0)})}};
k.onLayoutMeasure=function(){var a=this;if(this.h)this.h.onLayoutMeasure();if(!this.w&&V)if(this.w=!0,w().assert(mb(this.element,this.win),"<%s> is not allowed to be placed in elements with position:fixed: %s",this.element.tagName,this.element),this.isValidElement()){this.A++;var b=this.A,d=function(b){if(b!=a.A)throw Error("CANCELLED");};this.s=E(this.getAmpDoc(),"viewer").whenFirstVisible().then(function(){d(b);return a.getAdUrl()}).then(function(c){d(b);a.f=c;a.emitLifecycleEvent("urlBuilt",c);
return c&&Ib(a,c)}).then(function(c){d(b);if(!c||!c.arrayBuffer)return null;a.emitLifecycleEvent("adRequestEnd",c);a.j=c.headers.get("X-AmpAdRender")||a.j;return c.arrayBuffer().then(function(a){return{bytes:a,headers:c.headers}})}).then(function(c){d(b);c&&a.emitLifecycleEvent("extractCreativeAndSignature",c);return c&&a.extractCreativeAndSignature(c.bytes,c.headers)}).then(function(c){d(b);"safeframe"==a.j&&c&&c.creative&&(a.i=c.creative);if(!c||!c.signature)return Promise.resolve(null);a.emitLifecycleEvent("adResponseValidateStart",
c);return Jb(a,c.creative,c.signature).then(function(b){if(b)return b;a.win.ampA4aValidationKeys=Hb(a);return Jb(a,c.creative,c.signature)})}).then(function(c){d(b);return c&&Kb(a,c)}).catch(function(b){return Lb(a,b)})}else w().warn("AMP-A4A","Amp ad element ignored as invalid",this.element)};
function Jb(a,b,d){var c=a.win.ampA4aValidationKeys;return nb(c.map(function(c){return c.then(function(c){return nb(c.map(function(c){return c.then(function(c){return c?Bb(new Uint8Array(b),d,c).then(function(a){return a?b:Promise.reject("Key failed to validate creative's signature.")},function(b){w().error("AMP-A4A",b,a.element)}):Promise.reject("Promise resolved to null key.")})})).then(function(a){return a[0]})})})).then(function(a){return a[0]})}
function Lb(a,b){if(b&&b.message){if(0==b.message.indexOf("amp-a4a: "))return b;if(b.message==Error("CANCELLED").message)throw b;}var d=a.f?a.f.indexOf("?"):-1;a={m:b instanceof Error?b.message:b,tag:a.element.tagName,type:a.element.getAttribute("type"),au:0>d?"":a.f.substring(d+1,d+251)};return Error("amp-a4a: "+JSON.stringify(a))}
k.layoutCallback=function(){var a=this;return!this.s||this.B?Promise.resolve():this.s.then(function(b){if(b instanceof Error||!b){a.emitLifecycleEvent("preAdThrottle");xb(a.win);if("safeframe"==a.j&&a.i){var d=Nb(a,a.i);a.i=null;return d}if(a.f)return Ob(a,a.f);throw Error("No creative or URL available -- A4A can't render any ad");}if(b instanceof Error)throw b;}).catch(function(b){return Promise.reject(Lb(a,b))})};
k.unlayoutCallback=function(){var a=this;this.emitLifecycleEvent("adSlotCleared");this.uiHandler.setDisplayState(0);if(!this.w)return!0;this.K.mutate(function(){for(var b=a.element;b.firstChild;)b.removeChild(b.firstChild);a.s=null;a.f=null;a.i=null;a.j=C(a.win,"platform").isIos()?"safeframe":null;a.B=!1;a.h&&(a.h.freeXOriginIframe(),a.h=null);a.w=!1});this.A++;return!0};k.viewportCallback=function(a){this.h&&this.h.viewportCallback(a)};
k.getAdUrl=function(){throw Error("getAdUrl not implemented!");};k.extractCreativeAndSignature=function(){throw Error("extractCreativeAndSignature not implemented!");};k.onAmpCreativeRender=function(){this.emitLifecycleEvent("renderFriendlyEnd")};k.onCrossDomainIframeCreated=function(a){x().info("A4A","onCrossDomainIframeCreated "+a)};
function Ib(a,b){a.emitLifecycleEvent("adRequestStart");var d={mode:"cors",method:"GET",credentials:"include",requireAmpResponseSourceOrigin:!0};return C(a.win,"xhr").fetch(b,d).catch(function(){return null})}k.getSigningServiceNames=function(){return["google"]};
function Hb(a){if(!V)return[];var b=a.getSigningServiceNames().map(function(b){xa(b);var c=Ya[b];if(c)return C(a.win,"xhr").fetchJson(c,{mode:"cors",method:"GET"}).then(function(b){if(z(b)&&Array.isArray(b.keys)&&b.keys.every(z))return b.keys;w().error("AMP-A4A","Invalid response from signing server.",a.element);return[]}).catch(function(b){w().error("AMP-A4A",b,a.element);return[]});c="Signing service '"+b+"' does not exist.";w().error("AMP-A4A",c,a.element);return[]});return b.map(function(b){return b.then(function(b){return b.map(function(b){return zb(b).catch(function(b){w().error("AMP-A4A",
b,a.element);return null})})})})}
function Kb(a,b){a.emitLifecycleEvent("renderFriendlyStart",b);return Ba(b).then(function(b){var c=Pb(b);if(c)try{var d=B(a.element.ownerDocument,"iframe",{frameborder:"0",allowfullscreen:"",allowtransparency:"",scrolling:"no"});a.applyFillContent(d);var f=[];c.customStylesheets&&c.customStylesheets.forEach(function(a){(a=a.href)&&f.push(a)});return ib(d,a.element,{url:a.f,html:c.minifiedCreative,extensionIds:c.customElementExtensions||[],fonts:f},function(b){var c=a.getAmpDoc(),d=new wb(a.getAmpDoc(),
b);pa(b,new Cb(c,d))}).then(function(b){var c=b.iframe.contentDocument||b.win.document;R(c.body,"visibility","visible");b.win.document.documentElement.addEventListener("click",a.P.bind(a),!0);Qb(a,b.win);a.B=!0;a.onAmpCreativeRender();return!0})}catch(g){return x().error("AMP-A4A","Error injecting creative in friendly frame",g),!1}else return a.K.mutate(function(){Ob(a,a.f)}),!0})}function Rb(a,b){a.h=new AMP.AmpAdXOriginIframeHandler(a);a.B=!0;return a.h.init(b,!0)}
function Ob(a,b){a.emitLifecycleEvent("renderCrossDomainStart");b=B(a.element.ownerDocument,"iframe",Object.assign({height:a.element.getAttribute("height"),width:a.element.getAttribute("width"),src:C(a.win,"xhr").getCorsUrl(a.win,b)},Fb));return Rb(a,b)}
function Nb(a,b){a.emitLifecycleEvent("renderSafeFrameStart");return Ba(b).then(function(b){b=B(a.element.ownerDocument,"iframe",Object.assign({height:a.element.getAttribute("height"),width:a.element.getAttribute("width"),src:"https://tpc.googlesyndication.com/safeframe/1-0-4/html/container.html?n=0",name:"1-0-4;"+b.length+";"+b},Fb));return Rb(a,b)})}
function Pb(a){var b=a.lastIndexOf('<script type="application/json" amp-ad-metadata>');if(0>b)return x().warn("A4A","Could not locate start index for amp meta data in: %s",a),null;var d=a.lastIndexOf("\x3c/script>");if(0>d)return x().warn("A4A","Could not locate closing script tag for amp meta data in: %s",a),null;try{var c=JSON.parse(a.slice(b+48,d)),e=c.ampRuntimeUtf16CharOffsets;if(!Eb(e))throw Error("Invalid runtime offsets");var f={};if(c.customElementExtensions&&(f.customElementExtensions=c.customElementExtensions,
!Array.isArray(f.customElementExtensions)))throw Error("Invalid extensions");if(c.customStylesheets){f.customStylesheets=c.customStylesheets;var g="Invalid custom stylesheets";if(!Array.isArray(f.customStylesheets))throw Error(g);f.customStylesheets.forEach(function(a){if(!z(a)||!a.href||"string"!==typeof a.href||!/^https:\/\//i.test(a.href))throw Error(g);})}f.minifiedCreative=a.slice(0,e[0])+a.slice(e[1],b)+a.slice(d+9);return f}catch(m){return x().warn("A4A","Invalid amp metadata: %s",a.slice(b+
48,d)),null}}function Qb(a,b){N(a.win,"alp-for-a4a")&&b.document.documentElement.addEventListener("click",function(b){Za(b,function(b){E(a.getAmpDoc(),"viewer").navigateTo(b,"a4a")})})}
k.P=function(a){var b=ja(a.target);if(b&&b.href){var d=b.getAttribute("data-a4a-orig-href")||b.getAttribute("href");if(d){var c=na(this.getAmpDoc()).expandSync(d,{CLICK_X:function(){return a.pageX},CLICK_Y:function(){return a.pageY}},void 0,{CLICK_X:!0,CLICK_Y:!0});c!=d&&(b.getAttribute("data-a4a-orig-href")||b.setAttribute("data-a4a-orig-href",d),b.setAttribute("href",c))}}};k.emitLifecycleEvent=function(){};var Sb={a4aProfilingRate:{on:1}};function Y(){}Y.prototype.sendPing=function(){};Y.prototype.reset=function(){};function Z(a,b,d,c,e){this.QQID_HEADER="X-QQID";this.o=a;this.u=b;this.I=d;this.C=e;this.L=c;this.F=this.I+"."+this.C;this.D=null;this.N=Date.now();this.J="https://csi.gstatic.com/csi"}r(Z,Y);Z.prototype.setQqid=function(a){this.D=a};Z.prototype.setPingAddress=function(a){this.J=a};
Z.prototype.sendPing=function(a){var b=Gb[a]||9999,d=Date.now()-this.N,c=this.D?encodeURIComponent(this.D):!1,c=c?"&qqid."+this.C+"="+c:"",e=this.u.getAttribute("data-experiment-id"),e=e?"&e="+encodeURIComponent(e):"";a=this.J+"?"+("s="+this.I)+("&v=2&it="+a+"."+d+","+a+"_"+this.C+"."+d)+("&rt=stage."+b+",slotId."+this.C)+("&c="+this.L)+"&rls=1481126804163"+(""+e+c)+("&it."+this.F+"="+a+"."+d)+("&rt."+this.F+"=stage."+b)+("&met."+this.F+"=stage_"+b+"."+d);b=this.u.ownerDocument.createElement("img");
b.setAttribute("src",a);b.setAttribute("style","position:fixed!important;top:0!important;width:1px!important;height:1px!important;overflow:hidden!important;visibility:hidden");b.setAttribute("aria-hidden","true");this.u.parentNode.insertBefore(b,this.u);x().info("PING",a)};Z.prototype.reset=function(){this.setQqid(null)};function Tb(a){X.call(this,a);this.g=this.g||this.initLifecycleReporter()}r(Tb,X);k=Tb.prototype;k.isValidElement=function(){return Ia(this.win,this.element)&&this.isAmpAdElement()&&!document.querySelector("meta[name=amp-3p-iframe-src]")};
k.getAdUrl=function(){var a=Date.now(),b=this.win,d=this.element.getAttribute("data-amp-slot-index"),c=Number(d),d=Na(b,d),e=this.getIntersectionElementLayoutBox(),e=e.width+"x"+e.height,f=this.element.getAttribute("json"),g=f?JSON.parse(f):{},m=g.tfcd,h=O(this.element),n={name:"iu",value:this.element.getAttribute("data-slot")},l={name:"co",value:g.cookieOptOut?"1":null},q,t=this.element;q=Ga(t);var y=t.getAttribute("data-slot")||"",t=t.getAttribute("data-multi-size")||"";q=Fa(y+":"+e+":"+t+":"+q);
return Ja(this,a,[n,l,{name:"adk",value:q},{name:"gdfp_req",value:"1"},{name:"impl",value:"ifr"},{name:"sfv",value:"A"},{name:"sz",value:e},{name:"tfcd",value:void 0==m?null:m},{name:"u_sd",value:b.devicePixelRatio},{name:"adtest",value:h},{name:"ifi",value:c},{name:"c",value:d}],[{name:"scp",value:Ub(g.targeting||null,g.categoryExclusions||null)}])};
k.extractCreativeAndSignature=function(a,b){a:{var d=a,c=null;try{b.has("X-AmpAdSignature")&&(c=L(b.get("X-AmpAdSignature")))}finally{b=Promise.resolve({creative:d,signature:c});break a}}return b};
k.emitLifecycleEvent=function(a,b){this.g=this.g||this.initLifecycleReporter();switch(a){case "adRequestEnd":b=b.headers.get(this.g.QQID_HEADER);this.g.setQqid(b);break;case "adSlotCleared":this.g.sendPing(a);this.g.reset();this.element.setAttribute("data-amp-slot-index",this.win.ampAdSlotIdCounter++);this.g=this.initLifecycleReporter();return}this.g.sendPing(a)};
k.initLifecycleReporter=function(){var a;a=this.element.getAttribute("data-amp-slot-index");var b=this.element.getAttribute("type"),d=this.win;Qa(d,Sb);if(b="doubleclick"==b||"adsense"==b)b=this.element.getAttribute("data-experiment-id"),b=b==Ua.experiment||b==Va.experiment||b==Wa.experiment||b==Xa.experiment||O(this.element)?!0:!1;b&&N(d,"a4aProfilingRate")?(b=Na(d),a=new Z(d,this.element,"a4a",b,Number(a))):a=new Y;var c=a;return c};AMP.registerElement("amp-ad-network-doubleclick-impl",Tb);
function Ub(a,b){if(!a)return null;var d=Object.keys(a).map(function(b){return Vb(b,a[b])});b&&d.push(Vb("excl_cat",b));return d.join("&")}function Vb(a,b){var d=encodeURIComponent(a),c=Array.isArray(b)?b.map(encodeURIComponent).join(","):encodeURIComponent(b);return d+"="+c};
})});
//# sourceMappingURL=amp-ad-network-doubleclick-impl-0.1.js.map

