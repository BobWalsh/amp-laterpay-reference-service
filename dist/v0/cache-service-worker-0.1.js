(function(){var g=self.AMP_CONFIG["cache-service-worker-blacklist"]||[],h=self.AMP_CONFIG.v,k=new RegExp("^"+((self.AMP_CONFIG||{}).cdnUrl||"https://cdn.ampproject.org").replace(/\./g,"\\.")+"(?:/rtv/(\\d{2}\\d{13,}))?(/v0(?:/(?!experiments).+)?\\.js)$");function l(a){var b=k.exec(a);return b&&b[1]||""}function m(a){return(a=k.exec(a))?a[2]:""}function p(a,b){var c=a.url;if(l(c)!==b){var d=Request;var e=l(c);e?b=c.replace(e,b):(c=new URL(c),c.pathname="/rtv/"+b+c.pathname,b=c.href);a=new d(b,a)}return a}
var q=Object.create(null),r,t=self.caches.open("cdn-js").then(function(a){r=a});function u(a,b,c){var d=r;return fetch(a).then(function(e){e&&e.ok&&(d.put(a,e.clone()),d.keys().then(function(a){for(var n=0;n<a.length;n++){var e=a[n],f=e.url;b===m(f)&&c!==l(f)&&d.delete(e)}}));return e})}function v(a){return r.keys().then(function(b){for(var c=0;c<b.length;c++){var d=b[c].url;if(a===m(d))return l(d)}return""})}
function w(a,b){var c=a.url;if(!b||!k.test(c))return null;var d=b,e=m(c),f=l(c)||h;a=p(a,f);return t.then(function(){return q[d]?q[d]:v(e).then(function(a){var b;if(b=a)b=a.substr(2),b=!(-1<g.indexOf(b));return b?a:f}).then(function(a){return q[d]?q[d]:q[d]=a})}).then(function(b){var c=p(a,b);return r.match(c).then(function(d){return d?(b!==f&&f==h&&u(a,e,f),d):u(c,e,b)})})}
self.addEventListener("install",function(a){a.waitUntil(t);a.registerForeignFetch&&a.registerForeignFetch({scopes:[self.registration.scope],origins:["*"]})});self.addEventListener("fetch",function(a){var b=w(a.request,a.clientId);b&&a.respondWith(b)});self.addEventListener("foreignfetch",function(a){var b=w(a.request,a.clientId);b&&a.respondWith(b.then(function(b){return{response:b,origin:a.origin}}))});})();
//# sourceMappingURL=cache-service-worker-0.1.js.map

