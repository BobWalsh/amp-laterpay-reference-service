(self.AMP = self.AMP || []).push({n:"amp-lightbox-viewer", f:(function(AMP) {var g;function k(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]};Date.now();self.log=self.log||{user:null,dev:null};var l=self.log;function m(){if(l.user)return l.user;throw Error("failed to call initLogConstructor");};function n(a,b,c){if(b(a))c();else{var d=a.ownerDocument.defaultView;if(d.MutationObserver){var e=new d.MutationObserver(function(){b(a)&&(e.disconnect(),c())});e.observe(a,{childList:!0})}else var h=d.setInterval(function(){b(a)&&(d.clearInterval(h),c())},5)}}function q(a,b){n(a.documentElement,function(){return!!a.body},b)}function r(a){return new Promise(function(b){q(a,b)})}function t(a,b){for(var c=[],d=a.parentElement;d;d=d.parentElement)b(d)&&c.push(d)};function u(a,b){a=a.__AMP_TOP||a;var c=a.services&&a.services[b]&&a.services[b].obj;return c};var v;
function w(a,b){var c=v||(v=Object.create(null));if(b in c)a=c[b];else{var d=b,e;if(a._experimentCookie)e=a._experimentCookie;else{c:{d:{try{e=a.document.cookie;break d}catch(X){}e=void 0}if(e){e=e.split(";");for(var h=0;h<e.length;h++){var f=e[h].trim(),p=f.indexOf("=");if(-1!=p&&"AMP_EXP"==decodeURIComponent(f.substring(0,p).trim())){e=decodeURIComponent(f.substring(p+1).trim());break c}}}e=null}e=a._experimentCookie=e?e.split(/\s*,\s*/g):[]}a=-1!=e.indexOf(d)?!0:a.AMP_CONFIG&&a.AMP_CONFIG.hasOwnProperty(d)?Math.random()<
a.AMP_CONFIG[d]:!1;a=c[b]=a}return a};function x(a,b){var c,d=c||!1;a.addEventListener("click",b,d);return function(){a&&a.removeEventListener("click",b,d);a=b=null}};var y,z="Webkit webkit Moz moz ms O o".split(" ");function A(a){var b=void 0;y||(y=Object.create(null));var c=y.display;if(!c||b){c="display";if(void 0===a.display){var d="D"+"display".slice(1);a:{for(var e=0;e<z.length;e++){var h=z[e]+d;if(void 0!==a[h]){d=h;break a}}d=""}var f=d;void 0!==a[f]&&(c=f)}b||(y.display=c)}return c}function B(a,b){if(void 0===b){var c;c=(c=A(a.style))?a.style[c]:void 0;b="none"==c}c=b?"":"none";var d=A(a.style);d&&(a.style[d]=c)};function C(a){return"loading"!=a.readyState&&"uninitialized"!=a.readyState}function D(a,b){var c=C,d=c(a);if(d)b(a);else{var e=function(){c(a)&&(d||(d=!0,b(a)),a.removeEventListener("readystatechange",e))};a.addEventListener("readystatechange",e)}}function E(a){return new Promise(function(b){D(a,b)})};var F="amp-img amp-anim amp-ad amp-dailymotion amp-jwplayer amp-kaltura-player amp-o2-player amp-pinterest amp-reach-player amp-vimeo amp-vine amp-youtube amp-video amp-twitter amp-facebook amp-instagram".split(" "),G={"amp-img":!0,"amp-anim":!0};
function H(a){w(a.win,"amp-lightbox-viewer");w(a.win,"amp-lightbox-viewer-auto");return I(a).then(function(b){for(var c=F.join(","),d=a.getRootNode().querySelectorAll(c),e=0;e<d.length;e++){var h=d[e],f;if(f=!h.hasAttribute("lightbox"))a:{if(h.getLayoutBox&&(f=h.getLayoutBox(),0>f.left||50>f.width||50>f.height)){f=!1;break a}f=!0}f&&(h.setAttribute("lightbox",""),h.hasAttribute("lightbox"),G[h.tagName.toLowerCase()]&&!h.hasAttribute("on")&&h.setAttribute("on","tap:"+b+".activate"))}})}
function I(a){return r(a.getRootNode()).then(function(){var b=a.getRootNode().getElementsByTagName("amp-lightbox-viewer")[0]||null;if(b)return b.id||(b.id="amp-lightbox-viewer"),b.id;var c=a.getRootNode().createElement("amp-lightbox-viewer");c.setAttribute("layout","nodisplay");c.setAttribute("id","amp-lightbox-viewer");a.getRootNode().body.appendChild(c);return c.id})};function J(a){var b=this;w(a.win,"amp-lightbox-viewer");this.j=a;this.i=this.b=null;u(a.win,"timer").delay(function(){K(b)},500)}g=J.prototype;g.getNext=function(a){var b=this;return K(this).then(function(){var c=b.b.indexOf(a);return c==b.b.length-1?null:b.b[c+1]})};g.getPrevious=function(a){var b=this;return K(this).then(function(){var c=b.b.indexOf(a);return 0==c?null:b.b[c-1]})};g.hasNext=function(a){return this.getNext(a).then(function(a){return!!a})};g.hasPrevious=function(a){return this.getPrevious(a).then(function(a){return!!a})};
function K(a){if(a.i)return a.i;w(a.j.win,"amp-lightbox-viewer-auto")?a.i=H(a.j).then(function(){return L(a)}):a.i=L(a);return a.i}function L(a){return E(a.j).then(function(){var b=a.j.getRootNode().querySelectorAll("[lightbox]");a.b=[];for(var c=0;c<b.length;c++){var d=b[c];"none"!=d.getAttribute("lightbox").toLowerCase()&&a.b.push(d)}})}
g.getDescription=function(a){var b=a.getAttribute("aria-describedby");if(b){var c=a.ownerDocument.getElementById(b);if(c)return c.textContent}var d=a.getAttribute("alt");return d?d:null};g.getThumbnails=function(){for(var a=[],b=0;b<this.b.length;b++){var c=this.b[b],d=b,e={url:"AMP-IMG"==c.tagName?c.getAttribute("src"):"https://placehold.it/128x128?text="+d,element:this.b[b]};a.push(e)}return a};var M;function N(a){AMP.BaseElement.apply(this,arguments)}k(N,AMP.BaseElement);g=N.prototype;g.isLayoutSupported=function(a){return"nodisplay"==a};g.renderOutsideViewport=function(){return!0};
g.buildCallback=function(){m().assert(w(this.win,"amp-lightbox-viewer"),"Experiment amp-lightbox-viewer disabled");this.o=!1;this.c=null;this.u=this.D.bind(this);this.g=M;this.m=this.getVsync();this.a=this.win.document.createElement("div");this.a.classList.add("-amp-lbv");this.s=this.l=this.h=this.f=null;var a=this.win.document.createElement("div");a.classList.add("-amp-lbv-mask");this.a.appendChild(a);this.f=this.win.document.createElement("div");this.f.classList.add("amp-lbv-desc-box");a=this.C.bind(this);
x(this.a,a);this.a.appendChild(this.f);var a=this.A.bind(this),b=this.B.bind(this),c=this.w.bind(this),d=this.F.bind(this);O(this,"Next","amp-lbv-button-next",a);O(this,"Previous","amp-lbv-button-prev",b);O(this,"Close","amp-lbv-button-close",c);O(this,"Gallery","amp-lbv-button-gallery",d);this.a.setAttribute("no-prev","");this.a.setAttribute("no-next","");this.element.appendChild(this.a)};g.layoutCallback=function(){return Promise.resolve()};g.C=function(){this.f.textContent&&this.f.classList.toggle("hide")};
function O(a,b,c,d){var e=a.win.document.createElement("div");e.setAttribute("role","button");e.setAttribute("aria-label",b);e.classList.add(c);e.addEventListener("click",function(a){d();a.stopPropagation()});a.a.appendChild(e)}
g.activate=function(a){var b=a.source;if(a.args&&a.args.id){var c=a.args.id,b=this.win.document.getElementById(c);m().assert(b,"amp-lightbox-viewer.open: element with id: %s not found",c)}this.c==b?b=Promise.resolve():(b=P(this,b),this.getViewport().enterLightboxMode(),B(this.element,!0),this.o=!0,this.win.document.documentElement.addEventListener("keydown",this.u));return b};
g.w=function(){if(!this.o)return Promise.resolve();B(this.element,!1);Q(this,this.c);this.getViewport().leaveLightboxMode();this.c=null;this.o=!1;this.f.classList.remove("hide");this.a.removeAttribute("gallery-view");this.a.setAttribute("no-prev","");this.a.setAttribute("no-next","");this.win.document.documentElement.removeEventListener("keydown",this.u)};g.A=function(){var a=this;return this.g.getNext(this.c).then(function(b){if(b)return P(a,b)})};
g.B=function(){var a=this;return this.g.getPrevious(this.c).then(function(b){if(b)return P(a,b)})};
function P(a,b){var c=a.c;if(b==c)return Promise.resolve();c&&Q(a,c);R(a,b);a.c=b;var d=S(a);if(b.__AMP__RESOURCE){b.__AMP__RESOURCE.setInViewport(!0);a=a.element;if(a.nodeType){var e=(a.ownerDocument||a).defaultView,h=e=e.__AMP_TOP||e,f=e.services;f||(f=e.services={});e=f;(f=e.ampdoc)||(f=e.ampdoc={obj:null,promise:null,resolve:null});f.obj||(f.obj=(void 0)(h),f.resolve&&f.resolve(f.obj));a=f.obj.getAmpDoc(a)}a=a.isSingleDoc()?a.win:a;(a&&a.services&&a.services.resources&&a.services.resources.obj).scheduleLayout(b,
b)}return d}function R(a,b){var c=a.g.getDescription(b);a.m.mutate(function(){T(b,!1);b.classList.add("amp-lightboxed");a.f.textContent=c});var d=a.C.bind(a);a.s=x(b,d)}function Q(a,b){a.m.mutate(function(){T(b,!0);b.classList.remove("amp-lightboxed")});a.s&&a.s()}
function S(a){var b=a.g.hasPrevious(a.c).then(function(b){b?a.a.removeAttribute("no-prev"):a.a.setAttribute("no-prev","")}),c=a.g.hasNext(a.c).then(function(b){b?a.a.removeAttribute("no-next"):a.a.setAttribute("no-next","")});return Promise.all([c,b])}function T(a,b){t(a,function(a){b?a.classList.remove("-amp-lightboxed-ancestor"):a.classList.add("-amp-lightboxed-ancestor")})}g.D=function(a){a=a.keyCode;27==a&&this.w();39==a&&this.A();37==a&&this.B()};
g.F=function(){this.h||U(this);this.a.setAttribute("gallery-view","")};g.v=function(){this.a.removeAttribute("gallery-view")};function U(a){a.h=a.win.document.createElement("div");a.h.classList.add("-amp-lbv-gallery");V(a);a.m.mutate(function(){a.a.appendChild(a.h)});var b=a.v.bind(a);O(a,"Back","amp-lbv-button-back",b)}function V(a){a.l||(a.l=[],a.g.getThumbnails().forEach(function(b){var c=W(a,b);a.l.push(c)}),a.m.mutate(function(){a.l.forEach(function(b){a.h.appendChild(b)})}))}
function W(a,b){function c(c){P(a,b.element);a.v();c.stopPropagation()}var d=a.win.document.createElement("div");d.classList.add("-amp-lbv-gallery-thumbnail");var e=a.win.document.createElement("img");e.classList.add("-amp-lbv-gallery-thumbnail-img");e.setAttribute("src",b.url);d.appendChild(e);d.addEventListener("click",c);return d}(function(a){w(a,"amp-lightbox-viewer")&&(a=u(a,"ampdoc").getAmpDoc(),M=new J(a))})(AMP.win);AMP.registerElement("amp-lightbox-viewer",N,'.amp-lightboxed{position:fixed!important;z-index:2147483643!important;width:100%;box-sizing:border-box;margin:0;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-o-object-fit:contain;object-fit:contain}.-amp-lightboxed-ancestor{z-index:auto!important;position:static!important;opacity:1!important;-webkit-transform:none!important;transform:none!important;clip:none!important;-webkit-transition:none!important;transition:none!important;will-change:auto!important;-webkit-mask:none!important;mask:none!important;-webkit-filter:none!important;filter:none!important;-webkit-perspective:none!important;perspective:none!important;-webkit-transform-style:flat!important;transform-style:flat!important;-webkit-box-reflect:none!important}:root.-amp-lightboxed-ancestor{overflow:hidden!important}.-amp-lbv-gallery,.-amp-lbv-mask,.amp-lbv-desc-box{position:fixed!important;left:0!important;right:0!important;bottom:0!important;background-image:none!important}.-amp-lbv-gallery,.-amp-lbv-mask{top:0!important;opacity:1!important;background-color:#000!important}.-amp-lbv-mask{z-index:2147483642!important}.-amp-lbv-gallery{display:none;z-index:2147483645!important;top:50px!important;overflow:auto!important}.amp-lbv-desc-box{z-index:2147483644!important;max-height:30vh!important;padding:10px;overflow-x:hidden;overflow-y:auto;color:#fff;background-color:rgba(0,0,0,.7);opacity:1;-webkit-transition:opacity 1s;transition:opacity 1s}.amp-lbv-desc-box.hide{opacity:0}.-amp-lbv[gallery-view] .-amp-lbv-gallery{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-content:flex-start;-ms-flex-line-pack:start;align-content:flex-start}.-amp-lbv-gallery-thumbnail{width:33.33333vw;height:33.33333vw;padding:5px;box-sizing:border-box;overflow:hidden}.-amp-lbv-gallery-thumbnail-img{-o-object-fit:cover;object-fit:cover;width:100%;height:100%}.amp-lbv-button-back,.amp-lbv-button-close,.amp-lbv-button-gallery,.amp-lbv-button-next,.amp-lbv-button-prev{z-index:2147483646!important;position:fixed!important;cursor:pointer;width:50px;height:50px;background-repeat:no-repeat;background-position:center center;background-color:rgba(0,0,0,.7)}.amp-lbv-button-next,.amp-lbv-button-prev{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.amp-lbv-button-next{right:0;background-image:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="%23fff" viewBox="0 0 18 18"><path d="M9 3L7.94 4.06l4.19 4.19H3v1.5h9.13l-4.19 4.19L9 15l6-6z" /></svg>\')}.amp-lbv-button-prev{left:0;background-image:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="%23fff" viewBox="0 0 18 18"><path d="M15 8.25H5.87l4.19-4.19L9 3 3 9l6 6 1.06-1.06-4.19-4.19H15v-1.5z" /></svg>\')}.amp-lbv-button-close{top:0;left:0;background-image:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="%23fff" height="24" viewBox="0 0 24 24" width="24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\')}.amp-lbv-button-gallery{top:0;right:0;background-image:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="%23fff" width="24" height="24" viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4z"/></svg>\')}.amp-lbv-button-back{top:0;display:none;left:0;background-image:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="%23fff" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>\')}.-amp-lbv[gallery-view] .amp-lbv-button-close,.-amp-lbv[gallery-view] .amp-lbv-button-gallery,.-amp-lbv[gallery-view] .amp-lbv-button-next,.-amp-lbv[gallery-view] .amp-lbv-button-prev,.-amp-lbv[no-next] .amp-lbv-button-next,.-amp-lbv[no-prev] .amp-lbv-button-prev{display:none}.-amp-lbv[gallery-view] .amp-lbv-button-back{display:block}\n/*# sourceURL=/extensions/amp-lightbox-viewer/0.1/amp-lightbox-viewer.css*/');
})});
//# sourceMappingURL=amp-lightbox-viewer-0.1.js.map

