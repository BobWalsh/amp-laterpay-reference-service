(self.AMP = self.AMP || []).push({n:"amp-google-vrview-image", f:(function(AMP) {function d(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var f in b)if(Object.defineProperties){var h=Object.getOwnPropertyDescriptor(b,f);h&&Object.defineProperty(a,f,h)}else a[f]=b[f]};Date.now();self.log=self.log||{user:null,dev:null};var g=self.log;function k(){if(g.user)return g.user;throw Error("failed to call initLogConstructor");}function l(){if(g.dev)return g.dev;throw Error("failed to call initLogConstructor");};var m,r;function t(a,b,c){b=encodeURIComponent(b)+"="+encodeURIComponent(c);b&&(a=a.split("#",2),c=a[0].split("?",2),b=c[0]+(c[1]?"?"+c[1]+"&"+b:"?"+b),a=b+=a[1]?"#"+a[1]:"");return a}
function u(a){if("string"==typeof a){m||(m=self.document.createElement("a"),r=self.UrlCache||(self.UrlCache=Object.create(null)));var b=r[a];if(b)a=b;else{m.href=a;m.protocol||(m.href=m.href);b={href:m.href,protocol:m.protocol,host:m.host,hostname:m.hostname,port:"0"==m.port?"":m.port,pathname:m.pathname,search:m.search,hash:m.hash,origin:null};"/"!==b.pathname[0]&&(b.pathname="/"+b.pathname);if("http:"==b.protocol&&80==b.port||"https:"==b.protocol&&443==b.port)b.port="",b.host=b.hostname;b.origin=
m.origin&&"null"!=m.origin?m.origin:"data:"!=b.protocol&&b.host?b.protocol+"//"+b.host:b.href;a=r[a]=b}}(b="https:"==a.protocol||"localhost"==a.hostname)||(a=a.hostname,b=a.length-10,b=0<=b&&a.indexOf(".localhost",b)==b);return b};var v;
function w(a){var b="amp-google-vrview-image",c=v||(v=Object.create(null)),f;if(b in c)f=c[b];else{f=b;var h=b,e;if(a._experimentCookie)e=a._experimentCookie;else{c:{d:{try{e=a.document.cookie;break d}catch(y){}e=void 0}if(e){e=e.split(";");for(var n=0;n<e.length;n++){var p=e[n].trim(),q=p.indexOf("=");if(-1!=q&&"AMP_EXP"==decodeURIComponent(p.substring(0,q).trim())){e=decodeURIComponent(p.substring(q+1).trim());break c}}}e=null}e=a._experimentCookie=e?e.split(/\s*,\s*/g):[]}a=-1!=e.indexOf(h)?!0:
a.AMP_CONFIG&&a.AMP_CONFIG.hasOwnProperty(h)?Math.random()<a.AMP_CONFIG[h]:!1;f=c[f]=a}return f};function x(a){AMP.BaseElement.apply(this,arguments)}d(x,AMP.BaseElement);x.prototype.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a};
x.prototype.buildCallback=function(){if(this.a=w(this.win)){var a=this.element.getAttribute("src"),b=this.element,c;c=void 0===c?"source":c;k().assert(null!=a,"%s %s must be available",b,c);k().assert(u(a)||/^(\/\/)/.test(a),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,c,a);this.c=a;a=t("https://storage.googleapis.com/vrview/index.html","image",this.c);this.element.hasAttribute("stereo")&&(a=t(a,"is_stereo","true"));
var f=this.element.getAttribute("yaw");f&&(a=t(a,"start_yaw",f));this.element.hasAttribute("yaw-only")&&(a=t(a,"is_yaw_only","true"));this.b=a}else l().warn("amp-google-vrview-image","TAG amp-google-vrview-image disabled")};x.prototype.preconnectCallback=function(){this.b&&(this.preconnect.preload(this.b),this.preconnect.preload(this.c))};x.prototype.createPlaceholderCallback=function(){return null};
x.prototype.layoutCallback=function(){this.a=w(this.win);if(!this.a)return l().warn("amp-google-vrview-image","TAG amp-google-vrview-image disabled"),Promise.resolve();var a=this.element.ownerDocument.createElement("iframe");a.onload=function(){a.readyState="complete"};this.applyFillContent(a);a.setAttribute("frameborder","0");a.setAttribute("allowfullscreen","true");a.setAttribute("src",this.b);this.element.appendChild(a);this.f=a;return this.loadPromise(a)};
AMP.registerElement("amp-google-vrview-image",x);
})});
//# sourceMappingURL=amp-google-vrview-image-0.1.js.map

