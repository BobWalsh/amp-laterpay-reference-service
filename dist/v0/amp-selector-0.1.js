(self.AMP = self.AMP || []).push({n:"amp-selector", f:(function(AMP) {function h(a,b){function e(){}e.prototype=b.prototype;a.prototype=new e;a.prototype.constructor=a;for(var c in b)if(Object.defineProperties){var g=Object.getOwnPropertyDescriptor(b,c);g&&Object.defineProperty(a,c,g)}else a[c]=b[c]};Date.now();self.log=self.log||{user:null,dev:null};var m=self.log;function n(a,b,e){for(var c=a;c&&c!==e;c=c.parentElement)if(b(c))return c;return null};var p;
function q(a){var b="amp-selector",e=p||(p=Object.create(null)),c;if(b in e)c=e[b];else{c=b;var g=b,d;if(a._experimentCookie)d=a._experimentCookie;else{c:{d:{try{d=a.document.cookie;break d}catch(x){}d=void 0}if(d){d=d.split(";");for(var f=0;f<d.length;f++){var k=d[f].trim(),l=k.indexOf("=");if(-1!=l&&"AMP_EXP"==decodeURIComponent(k.substring(0,l).trim())){d=decodeURIComponent(k.substring(l+1).trim());break c}}}d=null}d=a._experimentCookie=d?d.split(/\s*,\s*/g):[]}a=-1!=d.indexOf(g)?!0:a.AMP_CONFIG&&a.AMP_CONFIG.hasOwnProperty(g)?
Math.random()<a.AMP_CONFIG[g]:!1;c=e[c]=a}return c};function r(a){AMP.BaseElement.call(this,a);this.c=!1;this.a=[];this.h=[];this.f=[];this.b=!1}h(r,AMP.BaseElement);r.prototype.isLayoutSupported=function(){return!0};
r.prototype.buildCallback=function(){var a;if(m.user)a=m.user;else throw Error("failed to call initLogConstructor");a.assert(q(this.win),"Experiment amp-selector is disabled.");this.c=this.element.hasAttribute("multiple");this.b=this.element.hasAttribute("disabled");this.element.setAttribute("role","listbox");this.c&&this.element.setAttribute("aria-multiselectable","true");this.b&&this.element.setAttribute("aria-disabled","true");t(this);this.b||this.element.addEventListener("click",this.g.bind(this))};
function t(a){[].slice.call(a.element.querySelectorAll("[option]")).forEach(function(b){b.setAttribute("role","option");b.hasAttribute("disabled")&&b.setAttribute("aria-disabled","true");b.hasAttribute("selected")?u(a,b):v(a,b);b.setAttribute("tabindex","0");a.h.push(b)});w(a)}
function w(a){var b=a.element.getAttribute("name");if(b&&!a.b){var e=a.element.getAttribute("form");a.f.forEach(function(b){a.element.removeChild(b)});a.f=[];var c=a.win.document,g=c.createDocumentFragment();a.a.forEach(function(d){if(!d.hasAttribute("disabled")){var f=c.createElement("input");f.setAttribute("type","hidden");f.setAttribute("name",b);f.setAttribute("value",d.getAttribute("option"));e&&f.setAttribute("form",e);a.f.push(f);g.appendChild(f)}});a.element.appendChild(g)}}
r.prototype.g=function(a){var b=a.target;b&&(b.hasAttribute("option")||(b=n(b,function(a){return a.hasAttribute("option")},this.element)),b&&!b.hasAttribute("disabled")&&(b.hasAttribute("selected")?this.c&&(v(this,b),w(this)):(u(this,b),w(this))))};function v(a,b){b.removeAttribute("selected");b.setAttribute("aria-selected","false");var e=a.a.indexOf(b);-1!==e&&a.a.splice(e,1)}
function u(a,b){if(!a.c)for(;0<a.a.length;){var e=a.a.pop();v(a,e)}b.setAttribute("selected","");b.setAttribute("aria-selected","true");a.a.push(b)}AMP.registerElement("amp-selector",r);
})});
//# sourceMappingURL=amp-selector-0.1.js.map

