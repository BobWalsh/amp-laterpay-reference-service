(self.AMP = self.AMP || []).push({n:"amp-fx-flying-carpet", f:(function(AMP) {var g;function l(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(b,d);f&&Object.defineProperty(a,d,f)}else a[d]=b[d]};Date.now();self.log=self.log||{user:null,dev:null};var m=self.log;function p(){if(m.user)return m.user;throw Error("failed to call initLogConstructor");};var q;
function r(a){var b="amp-fx-flying-carpet",c=q||(q=Object.create(null)),d;if(b in c)d=c[b];else{d=b;var f=b,e;if(a._experimentCookie)e=a._experimentCookie;else{c:{d:{try{e=a.document.cookie;break d}catch(z){}e=void 0}if(e){e=e.split(";");for(var h=0;h<e.length;h++){var k=e[h].trim(),n=k.indexOf("=");if(-1!=n&&"AMP_EXP"==decodeURIComponent(k.substring(0,n).trim())){e=decodeURIComponent(k.substring(n+1).trim());break c}}}e=null}e=a._experimentCookie=e?e.split(/\s*,\s*/g):[]}a=-1!=e.indexOf(f)?!0:a.AMP_CONFIG&&
a.AMP_CONFIG.hasOwnProperty(f)?Math.random()<a.AMP_CONFIG[f]:!1;d=c[d]=a}return d};var t,u="Webkit webkit Moz moz ms O o".split(" ");function v(a,b){var c=void 0;t||(t=Object.create(null));var d=t[b];if(!d||c){d=b;if(void 0===a[b]){var f=b.charAt(0).toUpperCase()+b.slice(1);a:{for(var e=0;e<u.length;e++){var h=u[e]+f;if(void 0!==a[h]){f=h;break a}}f=""}var k=f;void 0!==a[k]&&(d=k)}c||(t[b]=d)}return d}function w(a){var b=!1;if(void 0===b){var c;c=(c=v(a.style,"display"))?a.style[c]:void 0;b="none"==c}c=b?"":"none";var d=v(a.style,"display");d&&(a.style[d]=c)};function x(a){AMP.BaseElement.call(this,a);this.a=[];this.b=0;this.c=null}l(x,AMP.BaseElement);g=x.prototype;g.isLayoutSupported=function(a){return"fixed-height"==a};
g.buildCallback=function(){var a=this;if(r(this.win)){var b=this.element.ownerDocument,c=b.createElement("div");this.a=this.getRealChildren();this.c=c;var d=this.getRealChildNodes();this.b=y(d).length;this.a.forEach(function(b){return a.setAsOwner(b)});var f=b.createElement("div");f.setAttribute("class","-amp-fx-flying-carpet-clip");c.setAttribute("class","-amp-fx-flying-carpet-container");d.forEach(function(a){return c.appendChild(a)});f.appendChild(c);this.element.appendChild(f);this.getViewport().addToFixedLayer(c)}else{if(m.dev)b=
m.dev;else throw Error("failed to call initLogConstructor");b.warn("amp-fx-flying-carpet","Experiment amp-fx-flying-carpet disabled");w(this.element)}};g.onLayoutMeasure=function(){var a=this,b=this.getLayoutWidth();this.getVsync().mutate(function(){var c=a.c,d=v(c.style,"width");d&&(c.style[d]=b+"px")})};g.viewportCallback=function(a){this.updateInViewport(this.a,a)};
g.assertPosition=function(){var a=this.element.getLayoutBox(),b=this.getViewport(),c=b.getHeight(),d=b.getScrollHeight();p().assert(a.top>=c,"<amp-fx-flying-carpet> elements must be positioned after the first viewport: %s Current position: %s. Min: %s",this.element,a.top,c);p().assert(a.bottom<=d-c,"<amp-fx-flying-carpet> elements must be positioned before the last viewport: %s Current position: %s. Max: %s",this.element,a.bottom,d-c)};
g.layoutCallback=function(){try{this.assertPosition()}catch(a){throw this.collapse(),a;}this.scheduleLayout(this.a);return Promise.resolve()};g.collapsedCallback=function(a){var b=this;a=this.a.indexOf(a);if(-1<a&&(this.a.splice(a,1),this.b--,0==this.b))return this.attemptChangeHeight(0).then(function(){b.collapse()},function(){})};function y(a){return a.filter(function(a){return 1===a.nodeType?!0:3===a.nodeType?/\S/.test(a.textContent):!1})}AMP.registerElement("amp-fx-flying-carpet",x,"amp-fx-flying-carpet{position:relative!important;box-sizing:border-box!important}amp-fx-flying-carpet>.-amp-fx-flying-carpet-clip{position:absolute!important;top:0!important;left:0!important;width:100%!important;height:100%!important;border:0!important;margin:0!important;padding:0!important;clip:rect(0,auto,auto,0)!important;-webkit-clip-path:polygon(0px 0px,100% 0px,100% 100%,0px 100%)!important;clip-path:polygon(0px 0px,100% 0px,100% 100%,0px 100%)!important}amp-fx-flying-carpet>.-amp-fx-flying-carpet-clip>.-amp-fx-flying-carpet-container{position:fixed!important;top:0!important;-webkit-transform:translateZ(0)!important}\n/*# sourceURL=/extensions/amp-fx-flying-carpet/0.1/amp-fx-flying-carpet.css*/");
})});
//# sourceMappingURL=amp-fx-flying-carpet-0.1.js.map

