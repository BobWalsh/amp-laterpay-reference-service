(self.AMP = self.AMP || []).push({n:"amp-sticky-ad", f:(function(AMP) {var f;function g(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]};Date.now();self.log=self.log||{user:null,dev:null};var h=self.log;function k(a,b,c){function d(a){c(a);e()}var e;e=function(){a&&a.removeEventListener(b,d,!1);c=d=a=null};a.addEventListener(b,d,!1)};var l,m="Webkit webkit Moz moz ms O o".split(" ");function n(a){var b=void 0;l||(l=Object.create(null));var c=l.display;if(!c||b){c="display";if(void 0===a.display){var d="D"+"display".slice(1);a:{for(var e=0;e<m.length;e++){var p=m[e]+d;if(void 0!==a[p]){d=p;break a}}d=""}var t=d;void 0!==a[t]&&(c=t)}b||(l.display=c)}return c}function q(a,b){if(void 0===b){var c;c=(c=n(a.style))?a.style[c]:void 0;b="none"==c}c=b?"":"none";var d=n(a.style);d&&(a.style[d]=c)};function r(a){AMP.BaseElement.call(this,a);this.g=this.getVsync();this.a=this.b=null;this.f=!1;this.c=null}g(r,AMP.BaseElement);f=r.prototype;f.isLayoutSupported=function(a){return"nodisplay"==a};
f.buildCallback=function(){var a=this;this.a=this.getViewport();q(this.element,!0);this.element.classList.add("-amp-sticky-ad-layout");var b=this.getRealChildren(),c;if(h.user)c=h.user;else throw Error("failed to call initLogConstructor");c.assert(1==b.length&&"AMP-AD"==b[0].tagName,"amp-sticky-ad must have a single amp-ad child");this.b=b[0];this.setAsOwner(this.b);this.c=this.a.onScroll(function(){return u(a)})};
f.layoutCallback=function(){if(this.f){q(this.element,!0);var a=this.element.offsetHeight;this.a.updatePaddingBottom(a);this.updateInViewport(this.b,!0);this.scheduleLayout(this.b)}return Promise.resolve()};f.unlayoutCallback=function(){this.a.updatePaddingBottom(0);this.element.classList.remove("amp-sticky-ad-loaded");return!0};f.detachedCallback=function(){v(this)};f.collapsedCallback=function(){var a=this;q(this.element,!1);this.g.mutate(function(){a.a.updatePaddingBottom(0)})};
function v(a){a.c&&(a.c(),a.c=null)}
function u(a){var b=a.a.getScrollTop(),c=a.a.getSize().height,d=a.a.getScrollHeight();d<2*c?v(a):b>c&&(v(a),a.deferMutate(function(){a.f=!0;a.a.addToFixedLayer(a.element);a.a.updatePaddingBottom(a.element.offsetHeight);var b=a.win.document.createElement("button");b.classList.add("amp-sticky-ad-close-button");b.setAttribute("aria-label",a.element.getAttribute("data-close-button-aria-label")||"Close this ad");var c=a.h.bind(a);b.addEventListener("click",c);a.element.appendChild(b);w(a)}))}
function w(a){a.b.isBuilt()?x(a):k(a.b,"amp:built",function(){x(a)})}function x(a){a.updateInViewport(a.b,!0);a.scheduleLayout(a.b);k(a.b,"amp:load:end",function(){a.g.mutate(function(){a.element.setAttribute("visible","");a.element.classList.add("amp-sticky-ad-loaded")})})}f.h=function(){var a=this;this.g.mutate(function(){a.f=!1;a.scheduleUnlayout(a.b);a.a.removeFromFixedLayer(a.element);var b=a.element;b.parentElement&&b.parentElement.removeChild(b);a.a.updatePaddingBottom(0)})};
(function(a){a.registerElement("amp-sticky-ad",r,"amp-sticky-ad{position:fixed!important;text-align:center;bottom:0!important;left:0;width:100%!important;z-index:11;max-height:100px!important;box-sizing:border-box}.-amp-sticky-ad-layout{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;visibility:hidden!important;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;overflow:visible!important;-webkit-transform:translateZ(0)!important;transform:translateZ(0)!important}amp-sticky-ad[visible]{visibility:visible!important}.amp-sticky-ad-loaded{background-color:#fff}.-amp-sticky-ad-layout>amp-ad{display:block}.amp-sticky-ad-close-button{position:absolute;visibility:hidden;width:32px;height:32px;top:-32px;right:0;background-image:url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22%23000000%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224%22%3E%3Cpath%20d%3D%22M19%206.41L17.59%205%2012%2010.59%206.41%205%205%206.41%2010.59%2012%205%2017.59%206.41%2019%2012%2013.41%2017.59%2019%2019%2017.59%2013.41%2012z%22%2F%3E%3Cpath%20d%3D%22M0%200h24v24H0z%22%20fill%3D%22none%22%2F%3E%3C%2Fsvg%3E');background-size:26px 26px;background-position:center;background-color:#fff;border:1px solid #c8c8c8}amp-sticky-ad[visible]>.amp-sticky-ad-close-button{visibility:visible}.amp-sticky-ad-close-button:before{position:absolute;content:'';top:-18px;right:0;left:-18px;bottom:0}[dir=rtl] .amp-sticky-ad-close-button{right:auto;left:0}[dir=rtl] .amp-sticky-ad-close-button:before{top:-18px;right:-18px;left:0}\n/*# sourceURL=/extensions/amp-sticky-ad/0.1/amp-sticky-ad.css*/")})(self.AMP);
})});
//# sourceMappingURL=amp-sticky-ad-0.1.js.map

