(self.AMP = self.AMP || []).push({n:"amp-twitter", f:(function(AMP) {function h(a,d){function b(){}b.prototype=d.prototype;a.prototype=new b;a.prototype.constructor=a;for(var c in d)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(d,c);f&&Object.defineProperty(a,c,f)}else a[c]=d[c]}var q="";
function v(){var a=void 0,d=a||self,b;if(d.AMP_MODE)b=d.AMP_MODE;else{b=d;if(b.context&&b.context.mode)b=b.context.mode;else{var c=w(b.location.originalHash||b.location.hash),f=w(b.location.search);q||(q=b.AMP_CONFIG&&b.AMP_CONFIG.v?b.AMP_CONFIG.v:"011481124767089");b={localDev:!1,development:!("1"!=c.development&&!b.AMP_DEV_MODE),filter:c.filter,minified:!0,lite:void 0!=f.amp_lite,test:!1,log:c.log,version:"1481124767089",rtvVersion:q}}b=d.AMP_MODE=b}return b}
function w(a){var d=Object.create(null);if(!a)return d;if(0==a.indexOf("?")||0==a.indexOf("#"))a=a.substr(1);for(var b=a.split("&"),c=0;c<b.length;c++){var f=b[c],e=f.indexOf("="),g,l;-1!=e?(g=decodeURIComponent(f.substring(0,e)).trim(),l=decodeURIComponent(f.substring(e+1)).trim()):(g=decodeURIComponent(f).trim(),l="");g&&(d[g]=l)}return d};Date.now();self.log=self.log||{user:null,dev:null};var x=self.log;function B(){if(x.user)return x.user;throw Error("failed to call initLogConstructor");};function C(a,d){var b=a;if(b.nodeType){var c=(b.ownerDocument||b).defaultView,f=c=c.__AMP_TOP||c,e=c.services;e||(e=c.services={});c=e;(e=c.ampdoc)||(e=c.ampdoc={obj:null,promise:null,resolve:null});e.obj||(e.obj=(void 0)(f),e.resolve&&e.resolve(e.obj));b=e.obj.getAmpDoc(b)}var g=b.isSingleDoc()?b.win:b;return g&&g.services&&g.services[d]&&g.services[d].obj};function G(a){return a.replace(/-([a-z])/g,function(a,b){return b.toUpperCase()})};var H=self.AMP_CONFIG||{},I=H.thirdPartyUrl||"https://3p.ampproject.net",J=H.thirdPartyFrameHost||"ampproject.net";var K,L;
function M(a){var d;K||(K=self.document.createElement("a"),L=self.UrlCache||(self.UrlCache=Object.create(null)));var b=L[a];if(b)return b;K.href=a;K.protocol||(K.href=K.href);var c={href:K.href,protocol:K.protocol,host:K.host,hostname:K.hostname,port:"0"==K.port?"":K.port,pathname:K.pathname,search:K.search,hash:K.hash,origin:null};"/"!==c.pathname[0]&&(c.pathname="/"+c.pathname);if("http:"==c.protocol&&80==c.port||"https:"==c.protocol&&443==c.port)c.port="",c.host=c.hostname;c.origin=K.origin&&"null"!=
K.origin?K.origin:"data:"!=c.protocol&&c.host?c.protocol+"//"+c.host:c.href;var f=c;return d?f:L[a]=f}function N(a){"string"==typeof a&&(a=M(a));var d;(d="https:"==a.protocol||"localhost"==a.hostname)||(a=a.hostname,d=a.length-10,d=0<=d&&a.indexOf(".localhost",d)==d);return d};function O(a){for(var d=a.nodeName,b=0,c=0,f=a.previousElementSibling;f&&25>c&&100>b;)f.nodeName==d&&c++,b++,f=f.previousElementSibling;return 25>c&&100>b?"."+c:""};var P,R="Webkit webkit Moz moz ms O o".split(" ");function S(a){var d,b=a.style;P||(P=Object.create(null));var c=P.border;if(!c){c="border";if(void 0===b.border){var f="B"+"border".slice(1);a:{for(var e=0;e<R.length;e++){var g=R[e]+f;if(void 0!==b[g]){f=g;break a}}f=""}void 0!==b[f]&&(c=f)}P.border=c}(b=c)&&(a.style[b]=d?"none"+d:"none")};function T(a){a=parseFloat(a);return"number"===typeof a&&isFinite(a)?a:void 0};function U(a,d,b){var c=a.listeningFors;!c&&b&&(c=a.listeningFors=Object.create(null));a=c||null;if(!a)return a;var f=a[d];!f&&b&&(f=a[d]=[]);return f||null}function V(a,d){var b=!0,c=M(d.src).origin,f=b?d.getAttribute("data-amp-3p-sentinel"):"amp";a=U(a,f,!0);for(var e,f=0;f<a.length;f++){var g=a[f];if(g.frame===d){e=g;break}}e||(e={frame:d,origin:c,events:Object.create(null)},a.push(e));return e.events}
function aa(a){for(var d={sentinel:"unlisten"},b=a.length-1;0<=b;b--){var c=a[b];if(!c.frame.contentWindow){a.splice(b,1);var f=c.events,e;for(e in f)f[e].splice(0,Infinity).forEach(function(a){a(d)})}}}
function ba(a){if(!a.listeningFors){var d=function(b){if(b.data){var c=b.data;if("string"===typeof c&&"{"===c.charAt(0))try{c=JSON.parse(c)}catch(y){var d;if(x.dev)d=x.dev;else throw Error("failed to call initLogConstructor");d.warn("IFRAME-HELPER","Postmessage could not be parsed. Is it in a valid JSON format?",y)}if(c.sentinel){var e;d=c.sentinel;var g=b.origin,l=b.source,n=U(a,d);if(n){for(var p=0;p<n.length;p++){var r=n[p],t=r.frame.contentWindow;if(t)if("amp"===d){if(r.origin===g&&t==l){e=r;
break}}else{var m;if(!(m=l==t))b:{for(m=l;m&&m!=m.parent;m=m.parent)if(m==t){m=!0;break b}m=!1}if(m){e=r;break}}else setTimeout(aa,0,n)}e=e?e.events:null}else e=n;var D=e;if(D){var u=D[c.type];if(u)for(u=u.slice(),e=0;e<u.length;e++)(0,u[e])(c,b.source,b.origin)}}}};a.addEventListener("message",d)}}
function ca(a,d){function b(b,e,f){if(c||e==a.contentWindow)"unlisten"==b.sentinel?l():d(b,e,f)}var c,f="embed-size",e=a.ownerDocument.defaultView;ba(e);var e=V(e,a),g=e[f]||(e[f]=[]),l;g.push(b);l=function(){if(b){var a=g.indexOf(b);-1<a&&g.splice(a,1);d=g=b=null}}};var W={};
function da(a,d){var b=Date.now(),c=d.getAttribute("width"),f=d.getAttribute("height");B().assert("twitter","Attribute type required for <amp-ad>: %s",d);for(var e={},g=0;g<d.attributes.length;g++){var l=d.attributes[g];0==l.name.indexOf("data-")&&(e[G(l.name.substr(5))]=l.value)}if(g=d.getAttribute("json")){var n;a:{try{n=JSON.parse(g);break a}catch(ga){}n=void 0}if(void 0===n)throw B().createError("Error parsing JSON in json attribute in element %s",d);for(var p in n)e[p]=n[p]}e.width=T(c);e.height=
T(f);e.type="twitter";var r=C(d,"documentInfo").get(),t=C(d,"viewer"),m=a.location.href;"about:srcdoc"==m&&(m=a.parent.location.href);c=t.getUnconfirmedReferrerUrl();f=r.canonicalUrl;p=r.pageViewId;n={href:m};for(var g=d.tagName,l={localDev:!1,development:v().development,filter:v().filter,minified:!0,lite:v().lite,test:!1,log:v().log,version:v().version,rtvVersion:v().rtvVersion},D=!(!a.AMP_CONFIG||!a.AMP_CONFIG.canary),u=!t.isVisible(),y=a,E=0,k=y;k&&k!=k.parent;k=k.parent)E++;for(var y=String(E)+
"-"+X(y),E=d.getIntersectionChangeEntry(),k=d,F=[],z=0;k&&1==k.nodeType&&25>z;){var A="";k.id&&(A="/"+k.id);var ea=k.nodeName.toLowerCase();F.push(""+ea+A+O(k));z++;k=k.parentElement}k=F.join();F=k.length;z=5381;for(A=0;A<F;A++)z=33*z^k.charCodeAt(A);e._context={referrer:c,canonicalUrl:f,pageViewId:p,location:n,tagName:g,mode:l,canary:D,hidden:u,amp3pSentinel:y,initialIntersection:E,domFingerprint:String(z>>>0),startTime:b};Object.assign(e._context,void 0);var Q=d.getAttribute("src");Q&&(e.src=Q);
return e}function fa(a,d){var b=da(a,d),c=a.document.createElement("iframe");W[b.type]||(W[b.type]=0);a=Y(a);var f=M(a).hostname;a=a+"#"+JSON.stringify(b);var e=f+"_"+b.type+"_"+W[b.type]++;c.src=a;c.name=e;c.ampLocation=M(a);c.width=b.width;c.height=b.height;c.setAttribute("scrolling","no");S(c);c.onload=function(){this.readyState="complete"};c.setAttribute("data-amp-3p-sentinel",b._context.amp3pSentinel);return c}
function Y(a){var d,b=a.bootstrapBaseUrl;if(b)a=b;else{var c;c=d;var f=a.document.querySelector('meta[name="amp-3p-iframe-src"]');if(f){var e=f.getAttribute("content"),g;g=void 0===g?"source":g;B().assert(null!=e,"%s %s must be available",f,g);B().assert(N(e)||/^(\/\/)/.test(e),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',f,g,e);B().assert(-1==e.indexOf("?"),"3p iframe url must not include query string %s in element %s.",
e,f);g=M(e);B().assert("localhost"==g.hostname&&!c||g.origin!=M(a.location.href).origin,"3p iframe url must not be on the same origin as the current document %s (%s) in element %s. See https://github.com/ampproject/amphtml/blob/master/spec/amp-iframe-origin-policy.md for details.",e,g.origin,f);c=e+"?1481124767089"}else c=null;a=a.bootstrapBaseUrl=c||"https://d-"+X(a)+("."+J+"/1481124767089/frame.html")}return a}
function X(a){var d;if(a.crypto&&a.crypto.getRandomValues){var b=new Uint32Array(2);a.crypto.getRandomValues(b);d=String(b[0])+b[1]}else d=String(a.Math.random()).substr(2)+"0";return d};function Z(a){AMP.BaseElement.call(this,a);this.a=null}h(Z,AMP.BaseElement);Z.prototype.preconnectCallback=function(a){this.preconnect.url("https://syndication.twitter.com",a);this.preconnect.url("https://pbs.twimg.com",a);this.preconnect.preload("https://platform.twitter.com/widgets.js","script");var d=this.preconnect,b=Y(this.win);d.preload(b,"document");d.preload(I+"/1481124767089/f.js","script")};
Z.prototype.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a};Z.prototype.firstLayoutCompleted=function(){};Z.prototype.layoutCallback=function(){var a=this,d=fa(this.win,this.element);this.applyFillContent(d);ca(d,function(b){a.togglePlaceholder(!1);a.changeHeight(b.height)});this.element.appendChild(d);this.a=d;return this.loadPromise(d)};Z.prototype.unlayoutOnPause=function(){return!0};
Z.prototype.unlayoutCallback=function(){if(this.a){var a=this.a;a.parentElement&&a.parentElement.removeChild(a);this.a=null}return!0};AMP.registerElement("amp-twitter",Z);
})});
//# sourceMappingURL=amp-twitter-0.1.js.map

